{"format_version":"0.1","terraform_version":"0.13.4","planned_values":{"root_module":{"resources":[{"address":"aws_cloudfront_distribution.s3_distribution","mode":"managed","type":"aws_cloudfront_distribution","name":"s3_distribution","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"aliases":null,"comment":"cloudfront-waf-enabled","custom_error_response":[{"error_caching_min_ttl":300,"error_code":403,"response_code":404,"response_page_path":"/404.html"}],"default_cache_behavior":[{"allowed_methods":["GET","HEAD","OPTIONS"],"cache_policy_id":null,"cached_methods":["GET","HEAD"],"compress":null,"default_ttl":null,"field_level_encryption_id":null,"forwarded_values":[{"cookies":[{"forward":"none","whitelisted_names":null}],"headers":null,"query_string":false,"query_string_cache_keys":null}],"function_association":[],"lambda_function_association":[],"max_ttl":null,"min_ttl":null,"origin_request_policy_id":null,"realtime_log_config_arn":null,"smooth_streaming":null,"target_origin_id":"cloudfront-dist-encrypted-bucket","trusted_key_groups":null,"trusted_signers":null,"viewer_protocol_policy":"https-only"}],"default_root_object":"index.html","enabled":true,"http_version":"http2","is_ipv6_enabled":false,"logging_config":[],"ordered_cache_behavior":[{"allowed_methods":["GET","HEAD","OPTIONS"],"cache_policy_id":null,"cached_methods":["GET","HEAD","OPTIONS"],"compress":null,"default_ttl":null,"field_level_encryption_id":null,"forwarded_values":[{"cookies":[{"forward":"none","whitelisted_names":null}],"headers":["Origin"],"query_string":false,"query_string_cache_keys":null}],"function_association":[],"lambda_function_association":[],"max_ttl":null,"min_ttl":null,"origin_request_policy_id":null,"path_pattern":"/path01/*","realtime_log_config_arn":null,"smooth_streaming":null,"target_origin_id":"cloudfront-dist-encrypted-bucket","trusted_key_groups":null,"trusted_signers":null,"viewer_protocol_policy":"https-only"},{"allowed_methods":["GET","HEAD","OPTIONS"],"cache_policy_id":null,"cached_methods":["GET","HEAD"],"compress":null,"default_ttl":null,"field_level_encryption_id":null,"forwarded_values":[{"cookies":[{"forward":"none","whitelisted_names":null}],"headers":null,"query_string":false,"query_string_cache_keys":null}],"function_association":[],"lambda_function_association":[],"max_ttl":null,"min_ttl":null,"origin_request_policy_id":null,"path_pattern":"/path02/*","realtime_log_config_arn":null,"smooth_streaming":null,"target_origin_id":"cloudfront-dist-encrypted-bucket","trusted_key_groups":null,"trusted_signers":null,"viewer_protocol_policy":"redirect-to-https"}],"origin":[{"connection_attempts":null,"connection_timeout":null,"custom_header":[],"custom_origin_config":[],"domain_name":"aws_s3_bucket.cdn-content.bucket_regional_domain_name","origin_id":"cloudfront-dist-encrypted-bucket","origin_path":null,"origin_shield":[],"s3_origin_config":[{"origin_access_identity":"origin-access-identity/cloudfront/aws_cloudfront_origin_access_identity.oai.id"}]}],"origin_group":[],"price_class":"PriceClass_200","restrictions":[{"geo_restriction":[{"locations":null,"restriction_type":"none"}]}],"retain_on_delete":false,"tags":null,"viewer_certificate":[{"acm_certificate_arn":null,"cloudfront_default_certificate":true,"iam_certificate_id":null,"minimum_protocol_version":null,"ssl_support_method":null}],"wait_for_deployment":true,"web_acl_id":"aws_wafv2_web_acl.test.arn"}},{"address":"aws_cloudfront_origin_access_identity.oai","mode":"managed","type":"aws_cloudfront_origin_access_identity","name":"oai","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"comment":"cloudfront-waf-enabled"}},{"address":"aws_s3_bucket.cdn-content","mode":"managed","type":"aws_s3_bucket","name":"cdn-content","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"acl":"private","bucket":"cloudfront-waf-enabled","bucket_prefix":null,"cors_rule":[],"force_destroy":false,"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Id\": \"AllowCloudFrontOAI\",\n  \"Statement\": [\n    {\n      \"Sid\": \"AllowCloudFrontOAI\",\n      \"Effect\": \"Allow\",\n      \"Principal\": {\n        \"CanonicalUser\": \"aws_cloudfront_origin_access_identity.oai.s3_canonical_user_id\"\n      },\n      \"Action\": \"s3:GetObject\",\n      \"Resource\": \"arn:aws:s3:::cloudfront-waf-enabled/*\"\n    }\n  ]\n}\n","replication_configuration":[],"server_side_encryption_configuration":[],"tags":null,"versioning":[],"website":[]}},{"address":"aws_s3_bucket_public_access_block.cdn-content","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"cdn-content","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"block_public_acls":true,"block_public_policy":true,"bucket":"aws_s3_bucket.cdn-content.id","ignore_public_acls":true,"restrict_public_buckets":true}},{"address":"aws_wafv2_web_acl.test","mode":"managed","type":"aws_wafv2_web_acl","name":"test","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"default_action":[{"allow":[{"custom_request_handling":[]}],"block":[]}],"description":null,"name":"managed-rule-example","rule":[{"action":[],"name":"rule-1","override_action":[{"count":[{}],"none":[]}],"priority":1,"statement":[{"and_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"managed_rule_group_statement":[{"excluded_rule":[{"name":"SizeRestrictions_QUERYSTRING"},{"name":"NoUserAgent_HEADER"}],"name":"AWSManagedRulesCommonRuleSet","vendor_name":"AWS"}],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{"cloudwatch_metrics_enabled":false,"metric_name":"friendly-rule-metric-name","sampled_requests_enabled":false}]}],"scope":"CLOUDFRONT","tags":null,"visibility_config":[{"cloudwatch_metrics_enabled":false,"metric_name":"friendly-metric-name","sampled_requests_enabled":false}]}}]}},"resource_changes":[{"address":"aws_cloudfront_distribution.s3_distribution","mode":"managed","type":"aws_cloudfront_distribution","name":"s3_distribution","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"aliases":null,"comment":"cloudfront-waf-enabled","custom_error_response":[{"error_caching_min_ttl":300,"error_code":403,"response_code":404,"response_page_path":"/404.html"}],"default_cache_behavior":[{"allowed_methods":["GET","HEAD","OPTIONS"],"cache_policy_id":null,"cached_methods":["GET","HEAD"],"compress":null,"default_ttl":null,"field_level_encryption_id":null,"forwarded_values":[{"cookies":[{"forward":"none","whitelisted_names":null}],"headers":null,"query_string":false,"query_string_cache_keys":null}],"function_association":[],"lambda_function_association":[],"max_ttl":null,"min_ttl":null,"origin_request_policy_id":null,"realtime_log_config_arn":null,"smooth_streaming":null,"target_origin_id":"cloudfront-dist-encrypted-bucket","trusted_key_groups":null,"trusted_signers":null,"viewer_protocol_policy":"https-only"}],"default_root_object":"index.html","enabled":true,"http_version":"http2","is_ipv6_enabled":false,"logging_config":[],"ordered_cache_behavior":[{"allowed_methods":["GET","HEAD","OPTIONS"],"cache_policy_id":null,"cached_methods":["GET","HEAD","OPTIONS"],"compress":null,"default_ttl":null,"field_level_encryption_id":null,"forwarded_values":[{"cookies":[{"forward":"none","whitelisted_names":null}],"headers":["Origin"],"query_string":false,"query_string_cache_keys":null}],"function_association":[],"lambda_function_association":[],"max_ttl":null,"min_ttl":null,"origin_request_policy_id":null,"path_pattern":"/path01/*","realtime_log_config_arn":null,"smooth_streaming":null,"target_origin_id":"cloudfront-dist-encrypted-bucket","trusted_key_groups":null,"trusted_signers":null,"viewer_protocol_policy":"https-only"},{"allowed_methods":["GET","HEAD","OPTIONS"],"cache_policy_id":null,"cached_methods":["GET","HEAD"],"compress":null,"default_ttl":null,"field_level_encryption_id":null,"forwarded_values":[{"cookies":[{"forward":"none","whitelisted_names":null}],"headers":null,"query_string":false,"query_string_cache_keys":null}],"function_association":[],"lambda_function_association":[],"max_ttl":null,"min_ttl":null,"origin_request_policy_id":null,"path_pattern":"/path02/*","realtime_log_config_arn":null,"smooth_streaming":null,"target_origin_id":"cloudfront-dist-encrypted-bucket","trusted_key_groups":null,"trusted_signers":null,"viewer_protocol_policy":"redirect-to-https"}],"origin":[{"connection_attempts":null,"connection_timeout":null,"custom_header":[],"custom_origin_config":[],"domain_name":"aws_s3_bucket.cdn-content.bucket_regional_domain_name","origin_id":"cloudfront-dist-encrypted-bucket","origin_path":null,"origin_shield":[],"s3_origin_config":[{"origin_access_identity":"origin-access-identity/cloudfront/aws_cloudfront_origin_access_identity.oai.id"}]}],"origin_group":[],"price_class":"PriceClass_200","restrictions":[{"geo_restriction":[{"locations":null,"restriction_type":"none"}]}],"retain_on_delete":false,"tags":null,"viewer_certificate":[{"acm_certificate_arn":null,"cloudfront_default_certificate":true,"iam_certificate_id":null,"minimum_protocol_version":null,"ssl_support_method":null}],"wait_for_deployment":true,"web_acl_id":"aws_wafv2_web_acl.test.arn"},"after_unknown":{"arn":true,"caller_reference":true,"custom_error_response":[{}],"default_cache_behavior":[{"allowed_methods":[false,false,false],"cached_methods":[false,false],"forwarded_values":[{"cookies":[{}]}],"function_association":[],"lambda_function_association":[]}],"domain_name":true,"etag":true,"hosted_zone_id":true,"id":true,"in_progress_validation_batches":true,"last_modified_time":true,"logging_config":[],"ordered_cache_behavior":[{"allowed_methods":[false,false,false],"cached_methods":[false,false,false],"forwarded_values":[{"cookies":[{}],"headers":[false]}],"function_association":[],"lambda_function_association":[]},{"allowed_methods":[false,false,false],"cached_methods":[false,false],"forwarded_values":[{"cookies":[{}]}],"function_association":[],"lambda_function_association":[]}],"origin":[{"custom_header":[],"custom_origin_config":[],"origin_shield":[],"s3_origin_config":[{}]}],"origin_group":[],"restrictions":[{"geo_restriction":[{}]}],"status":true,"tags_all":true,"trusted_key_groups":true,"trusted_signers":true,"viewer_certificate":[{}]}}},{"address":"aws_cloudfront_origin_access_identity.oai","mode":"managed","type":"aws_cloudfront_origin_access_identity","name":"oai","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"comment":"cloudfront-waf-enabled"},"after_unknown":{"caller_reference":true,"cloudfront_access_identity_path":true,"etag":true,"iam_arn":true,"id":true,"s3_canonical_user_id":true}}},{"address":"aws_s3_bucket.cdn-content","mode":"managed","type":"aws_s3_bucket","name":"cdn-content","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"acl":"private","bucket":"cloudfront-waf-enabled","bucket_prefix":null,"cors_rule":[],"force_destroy":false,"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Id\": \"AllowCloudFrontOAI\",\n  \"Statement\": [\n    {\n      \"Sid\": \"AllowCloudFrontOAI\",\n      \"Effect\": \"Allow\",\n      \"Principal\": {\n        \"CanonicalUser\": \"aws_cloudfront_origin_access_identity.oai.s3_canonical_user_id\"\n      },\n      \"Action\": \"s3:GetObject\",\n      \"Resource\": \"arn:aws:s3:::cloudfront-waf-enabled/*\"\n    }\n  ]\n}\n","replication_configuration":[],"server_side_encryption_configuration":[],"tags":null,"versioning":[],"website":[]},"after_unknown":{"acceleration_status":true,"arn":true,"bucket_domain_name":true,"bucket_regional_domain_name":true,"cors_rule":[],"grant":[],"hosted_zone_id":true,"id":true,"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"region":true,"replication_configuration":[],"request_payer":true,"server_side_encryption_configuration":[],"tags_all":true,"versioning":[],"website":[],"website_domain":true,"website_endpoint":true}}},{"address":"aws_s3_bucket_public_access_block.cdn-content","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"cdn-content","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"block_public_acls":true,"block_public_policy":true,"bucket":"aws_s3_bucket.cdn-content.id","ignore_public_acls":true,"restrict_public_buckets":true},"after_unknown":{"id":true}}},{"address":"aws_wafv2_web_acl.test","mode":"managed","type":"aws_wafv2_web_acl","name":"test","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"default_action":[{"allow":[{"custom_request_handling":[]}],"block":[]}],"description":null,"name":"managed-rule-example","rule":[{"action":[],"name":"rule-1","override_action":[{"count":[{}],"none":[]}],"priority":1,"statement":[{"and_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"managed_rule_group_statement":[{"excluded_rule":[{"name":"SizeRestrictions_QUERYSTRING"},{"name":"NoUserAgent_HEADER"}],"name":"AWSManagedRulesCommonRuleSet","vendor_name":"AWS"}],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{"cloudwatch_metrics_enabled":false,"metric_name":"friendly-rule-metric-name","sampled_requests_enabled":false}]}],"scope":"CLOUDFRONT","tags":null,"visibility_config":[{"cloudwatch_metrics_enabled":false,"metric_name":"friendly-metric-name","sampled_requests_enabled":false}]},"after_unknown":{"arn":true,"capacity":true,"default_action":[{"allow":[{"custom_request_handling":[]}],"block":[]}],"id":true,"lock_token":true,"rule":[{"action":[],"override_action":[{"count":[{}],"none":[]}],"statement":[{"and_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"managed_rule_group_statement":[{"excluded_rule":[{},{}]}],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{}]}],"tags_all":true,"visibility_config":[{}]}}}],"configuration":{"provider_config":{"aws":{"name":"aws","expressions":{"region":{"constant_value":"us-east-1"}}}},"root_module":{"resources":[{"address":"aws_cloudfront_distribution.s3_distribution","mode":"managed","type":"aws_cloudfront_distribution","name":"s3_distribution","provider_config_key":"aws","expressions":{"comment":{"references":["local.name"]},"custom_error_response":[{"error_caching_min_ttl":{"constant_value":300},"error_code":{"constant_value":403},"response_code":{"constant_value":404},"response_page_path":{"constant_value":"/404.html"}}],"default_cache_behavior":[{"allowed_methods":{"constant_value":["GET","HEAD","OPTIONS"]},"cached_methods":{"constant_value":["GET","HEAD"]},"forwarded_values":[{"cookies":[{"forward":{"constant_value":"none"}}],"query_string":{"constant_value":false}}],"target_origin_id":{"references":["local.s3_origin_id"]},"viewer_protocol_policy":{"constant_value":"https-only"}}],"default_root_object":{"constant_value":"index.html"},"enabled":{"constant_value":true},"ordered_cache_behavior":[{"allowed_methods":{"constant_value":["GET","HEAD","OPTIONS"]},"cached_methods":{"constant_value":["GET","HEAD","OPTIONS"]},"forwarded_values":[{"cookies":[{"forward":{"constant_value":"none"}}],"headers":{"constant_value":["Origin"]},"query_string":{"constant_value":false}}],"path_pattern":{"constant_value":"/path01/*"},"target_origin_id":{"references":["local.s3_origin_id"]},"viewer_protocol_policy":{"constant_value":"https-only"}},{"allowed_methods":{"constant_value":["GET","HEAD","OPTIONS"]},"cached_methods":{"constant_value":["GET","HEAD"]},"forwarded_values":[{"cookies":[{"forward":{"constant_value":"none"}}],"query_string":{"constant_value":false}}],"path_pattern":{"constant_value":"/path02/*"},"target_origin_id":{"references":["local.s3_origin_id"]},"viewer_protocol_policy":{"constant_value":"redirect-to-https"}}],"origin":[{"domain_name":{"references":["aws_s3_bucket.cdn-content"]},"origin_id":{"references":["local.s3_origin_id"]},"s3_origin_config":[{"origin_access_identity":{"references":["aws_cloudfront_origin_access_identity.oai"]}}]}],"price_class":{"constant_value":"PriceClass_200"},"restrictions":[{"geo_restriction":[{"restriction_type":{"constant_value":"none"}}]}],"viewer_certificate":[{"cloudfront_default_certificate":{"constant_value":true}}],"web_acl_id":{"references":["aws_wafv2_web_acl.test"]}},"schema_version":1,"raw_data":{"FileName":"main.tf","StartLine":40,"EndLine":122}},{"address":"aws_cloudfront_origin_access_identity.oai","mode":"managed","type":"aws_cloudfront_origin_access_identity","name":"oai","provider_config_key":"aws","expressions":{"comment":{"references":["local.name"]}},"schema_version":0,"raw_data":{"FileName":"main.tf","StartLine":36,"EndLine":38}},{"address":"aws_s3_bucket.cdn-content","mode":"managed","type":"aws_s3_bucket","name":"cdn-content","provider_config_key":"aws","expressions":{"acl":{"constant_value":"private"},"bucket":{"references":["local.name"]},"policy":{"references":["aws_cloudfront_origin_access_identity.oai","local.name"]}},"schema_version":0,"raw_data":{"FileName":"main.tf","StartLine":6,"EndLine":26}},{"address":"aws_s3_bucket_public_access_block.cdn-content","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"cdn-content","provider_config_key":"aws","expressions":{"block_public_acls":{"constant_value":true},"block_public_policy":{"constant_value":true},"bucket":{"references":["aws_s3_bucket.cdn-content"]},"ignore_public_acls":{"constant_value":true},"restrict_public_buckets":{"constant_value":true}},"schema_version":0,"raw_data":{"FileName":"main.tf","StartLine":28,"EndLine":34}},{"address":"aws_wafv2_web_acl.test","mode":"managed","type":"aws_wafv2_web_acl","name":"test","provider_config_key":"aws","expressions":{"default_action":[{"allow":[{}]}],"name":{"constant_value":"managed-rule-example"},"rule":[{"name":{"constant_value":"rule-1"},"override_action":[{"count":[{}]}],"priority":{"constant_value":1},"statement":[{"managed_rule_group_statement":[{"excluded_rule":[{"name":{"constant_value":"SizeRestrictions_QUERYSTRING"}},{"name":{"constant_value":"NoUserAgent_HEADER"}}],"name":{"constant_value":"AWSManagedRulesCommonRuleSet"},"vendor_name":{"constant_value":"AWS"}}]}],"visibility_config":[{"cloudwatch_metrics_enabled":{"constant_value":false},"metric_name":{"constant_value":"friendly-rule-metric-name"},"sampled_requests_enabled":{"constant_value":false}}]}],"scope":{"constant_value":"CLOUDFRONT"},"visibility_config":[{"cloudwatch_metrics_enabled":{"constant_value":false},"metric_name":{"constant_value":"friendly-metric-name"},"sampled_requests_enabled":{"constant_value":false}}]},"schema_version":0,"raw_data":{"FileName":"main.tf","StartLine":124,"EndLine":167}}]}}}
