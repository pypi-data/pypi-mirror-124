{"format_version":"0.1","terraform_version":"0.14.6","planned_values":{"root_module":{"resources":[{"address":"aws_cloudfront_distribution.s3_distribution","mode":"managed","type":"aws_cloudfront_distribution","name":"s3_distribution","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"aliases":[],"arn":"arn:aws:cloudfront::111111111111:distribution/E7ORXDB14QKTS","caller_reference":"terraform-20210830083527770700000002","comment":"cloudfront-waf-enabled","custom_error_response":[{"error_caching_min_ttl":300,"error_code":403,"response_code":404,"response_page_path":"/404.html"}],"default_cache_behavior":[{"allowed_methods":["GET","HEAD","OPTIONS"],"cache_policy_id":null,"cached_methods":["GET","HEAD"],"compress":null,"default_ttl":0,"field_level_encryption_id":null,"forwarded_values":[{"cookies":[{"forward":"none","whitelisted_names":[]}],"headers":[],"query_string":false,"query_string_cache_keys":[]}],"function_association":[],"lambda_function_association":[],"max_ttl":0,"min_ttl":null,"origin_request_policy_id":null,"realtime_log_config_arn":null,"smooth_streaming":null,"target_origin_id":"cloudfront-dist-encrypted-bucket","trusted_key_groups":[],"trusted_signers":[],"viewer_protocol_policy":"https-only"}],"default_root_object":"index.html","domain_name":"d1v2co3fvgmzsi.cloudfront.net","enabled":true,"etag":"E5FC5A9Z77UDG","hosted_zone_id":"Z2FDTNDATAQYW2","http_version":"http2","id":"E7ORXDB14QKTS","in_progress_validation_batches":0,"is_ipv6_enabled":false,"last_modified_time":"2021-08-30 08:35:28.952 +0000 UTC","logging_config":[],"ordered_cache_behavior":[{"allowed_methods":["GET","HEAD","OPTIONS"],"cache_policy_id":null,"cached_methods":["GET","HEAD","OPTIONS"],"compress":null,"default_ttl":0,"field_level_encryption_id":null,"forwarded_values":[{"cookies":[{"forward":"none","whitelisted_names":null}],"headers":["Origin"],"query_string":false,"query_string_cache_keys":[]}],"function_association":[],"lambda_function_association":[],"max_ttl":0,"min_ttl":null,"origin_request_policy_id":null,"path_pattern":"/path01/*","realtime_log_config_arn":null,"smooth_streaming":null,"target_origin_id":"cloudfront-dist-encrypted-bucket","trusted_key_groups":null,"trusted_signers":null,"viewer_protocol_policy":"https-only"},{"allowed_methods":["GET","HEAD","OPTIONS"],"cache_policy_id":null,"cached_methods":["GET","HEAD"],"compress":null,"default_ttl":0,"field_level_encryption_id":null,"forwarded_values":[{"cookies":[{"forward":"none","whitelisted_names":null}],"headers":[],"query_string":false,"query_string_cache_keys":[]}],"function_association":[],"lambda_function_association":[],"max_ttl":0,"min_ttl":null,"origin_request_policy_id":null,"path_pattern":"/path02/*","realtime_log_config_arn":null,"smooth_streaming":null,"target_origin_id":"cloudfront-dist-encrypted-bucket","trusted_key_groups":null,"trusted_signers":null,"viewer_protocol_policy":"redirect-to-https"}],"origin":[{"connection_attempts":null,"connection_timeout":null,"custom_header":[],"custom_origin_config":[],"domain_name":"cloudfront-waf-enabled.s3.amazonaws.com","origin_id":"cloudfront-dist-encrypted-bucket","origin_path":null,"origin_shield":[],"s3_origin_config":[{"origin_access_identity":"origin-access-identity/cloudfront/E2W22T67SMLIUK"}]}],"origin_group":[],"price_class":"PriceClass_200","restrictions":[{"geo_restriction":[{"locations":[],"restriction_type":"none"}]}],"retain_on_delete":false,"status":"Deployed","tags":{},"tags_all":{},"trusted_key_groups":[{"enabled":false,"items":[]}],"trusted_signers":[{"enabled":false,"items":[]}],"viewer_certificate":[{"acm_certificate_arn":null,"cloudfront_default_certificate":true,"iam_certificate_id":null,"minimum_protocol_version":null,"ssl_support_method":null}],"wait_for_deployment":true,"web_acl_id":"arn:aws:wafv2:us-east-1:111111111111:global/webacl/managed-rule-example/74705c06-ab44-4de0-9b7f-31759bdc0ec1"}},{"address":"aws_cloudfront_origin_access_identity.oai","mode":"managed","type":"aws_cloudfront_origin_access_identity","name":"oai","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"caller_reference":"terraform-20210830083507422100000001","cloudfront_access_identity_path":"origin-access-identity/cloudfront/E2W22T67SMLIUK","comment":"cloudfront-waf-enabled","etag":"E20VHN0UG1T38R","iam_arn":"arn:aws:iam::cloudfront:user/CloudFront Origin Access Identity E2W22T67SMLIUK","id":"E2W22T67SMLIUK","s3_canonical_user_id":"ad898829feeddae43d706f7e9925cd54807ad1adfdef5bf0d9d84c662a4f26a9f7a0d13f719657ffdbed3927a297624c"}},{"address":"aws_s3_bucket.cdn-content","mode":"managed","type":"aws_s3_bucket","name":"cdn-content","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"acceleration_status":"","acl":"private","arn":"arn:aws:s3:::cloudfront-waf-enabled","bucket":"cloudfront-waf-enabled","bucket_domain_name":"cloudfront-waf-enabled.s3.amazonaws.com","bucket_prefix":null,"bucket_regional_domain_name":"cloudfront-waf-enabled.s3.amazonaws.com","cors_rule":[],"force_destroy":false,"grant":[],"hosted_zone_id":"Z3AQBSTGFYJSTF","id":"cloudfront-waf-enabled","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Id\": \"AllowCloudFrontOAI\",\n  \"Statement\": [\n    {\n      \"Sid\": \"AllowCloudFrontOAI\",\n      \"Effect\": \"Allow\",\n      \"Principal\": {\n        \"CanonicalUser\": \"ad898829feeddae43d706f7e9925cd54807ad1adfdef5bf0d9d84c662a4f26a9f7a0d13f719657ffdbed3927a297624c\"\n      },\n      \"Action\": \"s3:GetObject\",\n      \"Resource\": \"arn:aws:s3:::cloudfront-waf-enabled/*\"\n    }\n  ]\n}\n","region":"us-east-1","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[],"tags":{},"tags_all":{},"versioning":[],"website":[],"website_domain":null,"website_endpoint":null}},{"address":"aws_s3_bucket_public_access_block.cdn-content","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"cdn-content","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"block_public_acls":true,"block_public_policy":true,"bucket":"cloudfront-waf-enabled","id":"cloudfront-waf-enabled","ignore_public_acls":true,"restrict_public_buckets":true}},{"address":"aws_wafv2_web_acl.test","mode":"managed","type":"aws_wafv2_web_acl","name":"test","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:wafv2:us-east-1:111111111111:global/webacl/managed-rule-example/74705c06-ab44-4de0-9b7f-31759bdc0ec1","capacity":700,"default_action":[{"allow":[{"custom_request_handling":[]}],"block":[]}],"description":"","id":"74705c06-ab44-4de0-9b7f-31759bdc0ec1","lock_token":"3d16396a-579e-48e5-8290-f98782a8291f","name":"managed-rule-example","rule":[{"action":[],"name":"rule-1","override_action":[{"count":[{}],"none":[]}],"priority":1,"statement":[{"and_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"managed_rule_group_statement":[{"excluded_rule":[{"name":"SizeRestrictions_QUERYSTRING"},{"name":"NoUserAgent_HEADER"}],"name":"AWSManagedRulesCommonRuleSet","scope_down_statement":[],"vendor_name":"AWS"}],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{"cloudwatch_metrics_enabled":false,"metric_name":"friendly-rule-metric-name","sampled_requests_enabled":false}]}],"scope":"CLOUDFRONT","tags":{},"tags_all":{},"visibility_config":[{"cloudwatch_metrics_enabled":false,"metric_name":"friendly-metric-name","sampled_requests_enabled":false}]}}]}},"resource_changes":[{"address":"aws_cloudfront_distribution.s3_distribution","mode":"managed","type":"aws_cloudfront_distribution","name":"s3_distribution","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["update"],"before":{"aliases":[],"arn":"arn:aws:cloudfront::111111111111:distribution/E7ORXDB14QKTS","caller_reference":"terraform-20210830083527770700000002","comment":"cloudfront-waf-enabled","custom_error_response":[{"error_caching_min_ttl":300,"error_code":403,"response_code":404,"response_page_path":"/404.html"}],"default_cache_behavior":[{"allowed_methods":["GET","HEAD","OPTIONS"],"cache_policy_id":"","cached_methods":["GET","HEAD"],"compress":false,"default_ttl":0,"field_level_encryption_id":"","forwarded_values":[{"cookies":[{"forward":"none","whitelisted_names":[]}],"headers":[],"query_string":false,"query_string_cache_keys":[]}],"function_association":[],"lambda_function_association":[],"max_ttl":0,"min_ttl":0,"origin_request_policy_id":"","realtime_log_config_arn":"","smooth_streaming":false,"target_origin_id":"cloudfront-dist-encrypted-bucket","trusted_key_groups":[],"trusted_signers":[],"viewer_protocol_policy":"https-only"}],"default_root_object":"index.html","domain_name":"d1v2co3fvgmzsi.cloudfront.net","enabled":true,"etag":"E5FC5A9Z77UDG","hosted_zone_id":"Z2FDTNDATAQYW2","http_version":"http2","id":"E7ORXDB14QKTS","in_progress_validation_batches":0,"is_ipv6_enabled":false,"last_modified_time":"2021-08-30 08:35:28.952 +0000 UTC","logging_config":[],"ordered_cache_behavior":[{"allowed_methods":["GET","HEAD","OPTIONS"],"cache_policy_id":"","cached_methods":["GET","HEAD","OPTIONS"],"compress":false,"default_ttl":0,"field_level_encryption_id":"","forwarded_values":[{"cookies":[{"forward":"none","whitelisted_names":[]}],"headers":["Origin"],"query_string":false,"query_string_cache_keys":[]}],"function_association":[],"lambda_function_association":[],"max_ttl":0,"min_ttl":0,"origin_request_policy_id":"","path_pattern":"/path01/*","realtime_log_config_arn":"","smooth_streaming":false,"target_origin_id":"cloudfront-dist-encrypted-bucket","trusted_key_groups":[],"trusted_signers":[],"viewer_protocol_policy":"https-only"},{"allowed_methods":["GET","HEAD","OPTIONS"],"cache_policy_id":"","cached_methods":["GET","HEAD"],"compress":false,"default_ttl":0,"field_level_encryption_id":"","forwarded_values":[{"cookies":[{"forward":"none","whitelisted_names":[]}],"headers":[],"query_string":false,"query_string_cache_keys":[]}],"function_association":[],"lambda_function_association":[],"max_ttl":0,"min_ttl":0,"origin_request_policy_id":"","path_pattern":"/path02/*","realtime_log_config_arn":"","smooth_streaming":false,"target_origin_id":"cloudfront-dist-encrypted-bucket","trusted_key_groups":[],"trusted_signers":[],"viewer_protocol_policy":"redirect-to-https"}],"origin":[{"connection_attempts":3,"connection_timeout":10,"custom_header":[],"custom_origin_config":[],"domain_name":"cloudfront-waf-enabled.s3.amazonaws.com","origin_id":"cloudfront-dist-encrypted-bucket","origin_path":"","origin_shield":[],"s3_origin_config":[{"origin_access_identity":"origin-access-identity/cloudfront/E2W22T67SMLIUK"}]}],"origin_group":[],"price_class":"PriceClass_200","restrictions":[{"geo_restriction":[{"locations":[],"restriction_type":"none"}]}],"retain_on_delete":false,"status":"Deployed","tags":{},"tags_all":{},"trusted_key_groups":[{"enabled":false,"items":[]}],"trusted_signers":[{"enabled":false,"items":[]}],"viewer_certificate":[{"acm_certificate_arn":"","cloudfront_default_certificate":true,"iam_certificate_id":"","minimum_protocol_version":"TLSv1","ssl_support_method":""}],"wait_for_deployment":true,"web_acl_id":"arn:aws:wafv2:us-east-1:111111111111:global/webacl/managed-rule-example/74705c06-ab44-4de0-9b7f-31759bdc0ec1"},"after":{"aliases":[],"arn":"arn:aws:cloudfront::111111111111:distribution/E7ORXDB14QKTS","caller_reference":"terraform-20210830083527770700000002","comment":"cloudfront-waf-enabled","custom_error_response":[{"error_caching_min_ttl":300,"error_code":403,"response_code":404,"response_page_path":"/404.html"}],"default_cache_behavior":[{"allowed_methods":["GET","HEAD","OPTIONS"],"cache_policy_id":null,"cached_methods":["GET","HEAD"],"compress":null,"default_ttl":0,"field_level_encryption_id":null,"forwarded_values":[{"cookies":[{"forward":"none","whitelisted_names":[]}],"headers":[],"query_string":false,"query_string_cache_keys":[]}],"function_association":[],"lambda_function_association":[],"max_ttl":0,"min_ttl":null,"origin_request_policy_id":null,"realtime_log_config_arn":null,"smooth_streaming":null,"target_origin_id":"cloudfront-dist-encrypted-bucket","trusted_key_groups":[],"trusted_signers":[],"viewer_protocol_policy":"https-only"}],"default_root_object":"index.html","domain_name":"d1v2co3fvgmzsi.cloudfront.net","enabled":true,"etag":"E5FC5A9Z77UDG","hosted_zone_id":"Z2FDTNDATAQYW2","http_version":"http2","id":"E7ORXDB14QKTS","in_progress_validation_batches":0,"is_ipv6_enabled":false,"last_modified_time":"2021-08-30 08:35:28.952 +0000 UTC","logging_config":[],"ordered_cache_behavior":[{"allowed_methods":["GET","HEAD","OPTIONS"],"cache_policy_id":null,"cached_methods":["GET","HEAD","OPTIONS"],"compress":null,"default_ttl":0,"field_level_encryption_id":null,"forwarded_values":[{"cookies":[{"forward":"none","whitelisted_names":null}],"headers":["Origin"],"query_string":false,"query_string_cache_keys":[]}],"function_association":[],"lambda_function_association":[],"max_ttl":0,"min_ttl":null,"origin_request_policy_id":null,"path_pattern":"/path01/*","realtime_log_config_arn":null,"smooth_streaming":null,"target_origin_id":"cloudfront-dist-encrypted-bucket","trusted_key_groups":null,"trusted_signers":null,"viewer_protocol_policy":"https-only"},{"allowed_methods":["GET","HEAD","OPTIONS"],"cache_policy_id":null,"cached_methods":["GET","HEAD"],"compress":null,"default_ttl":0,"field_level_encryption_id":null,"forwarded_values":[{"cookies":[{"forward":"none","whitelisted_names":null}],"headers":[],"query_string":false,"query_string_cache_keys":[]}],"function_association":[],"lambda_function_association":[],"max_ttl":0,"min_ttl":null,"origin_request_policy_id":null,"path_pattern":"/path02/*","realtime_log_config_arn":null,"smooth_streaming":null,"target_origin_id":"cloudfront-dist-encrypted-bucket","trusted_key_groups":null,"trusted_signers":null,"viewer_protocol_policy":"redirect-to-https"}],"origin":[{"connection_attempts":null,"connection_timeout":null,"custom_header":[],"custom_origin_config":[],"domain_name":"cloudfront-waf-enabled.s3.amazonaws.com","origin_id":"cloudfront-dist-encrypted-bucket","origin_path":null,"origin_shield":[],"s3_origin_config":[{"origin_access_identity":"origin-access-identity/cloudfront/E2W22T67SMLIUK"}]}],"origin_group":[],"price_class":"PriceClass_200","restrictions":[{"geo_restriction":[{"locations":[],"restriction_type":"none"}]}],"retain_on_delete":false,"status":"Deployed","tags":{},"tags_all":{},"trusted_key_groups":[{"enabled":false,"items":[]}],"trusted_signers":[{"enabled":false,"items":[]}],"viewer_certificate":[{"acm_certificate_arn":null,"cloudfront_default_certificate":true,"iam_certificate_id":null,"minimum_protocol_version":null,"ssl_support_method":null}],"wait_for_deployment":true,"web_acl_id":"arn:aws:wafv2:us-east-1:111111111111:global/webacl/managed-rule-example/74705c06-ab44-4de0-9b7f-31759bdc0ec1"},"after_unknown":{}}},{"address":"aws_cloudfront_origin_access_identity.oai","mode":"managed","type":"aws_cloudfront_origin_access_identity","name":"oai","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"caller_reference":"terraform-20210830083507422100000001","cloudfront_access_identity_path":"origin-access-identity/cloudfront/E2W22T67SMLIUK","comment":"cloudfront-waf-enabled","etag":"E20VHN0UG1T38R","iam_arn":"arn:aws:iam::cloudfront:user/CloudFront Origin Access Identity E2W22T67SMLIUK","id":"E2W22T67SMLIUK","s3_canonical_user_id":"ad898829feeddae43d706f7e9925cd54807ad1adfdef5bf0d9d84c662a4f26a9f7a0d13f719657ffdbed3927a297624c"},"after":{"caller_reference":"terraform-20210830083507422100000001","cloudfront_access_identity_path":"origin-access-identity/cloudfront/E2W22T67SMLIUK","comment":"cloudfront-waf-enabled","etag":"E20VHN0UG1T38R","iam_arn":"arn:aws:iam::cloudfront:user/CloudFront Origin Access Identity E2W22T67SMLIUK","id":"E2W22T67SMLIUK","s3_canonical_user_id":"ad898829feeddae43d706f7e9925cd54807ad1adfdef5bf0d9d84c662a4f26a9f7a0d13f719657ffdbed3927a297624c"},"after_unknown":{}}},{"address":"aws_s3_bucket.cdn-content","mode":"managed","type":"aws_s3_bucket","name":"cdn-content","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["update"],"before":{"acceleration_status":"","acl":"private","arn":"arn:aws:s3:::cloudfront-waf-enabled","bucket":"cloudfront-waf-enabled","bucket_domain_name":"cloudfront-waf-enabled.s3.amazonaws.com","bucket_prefix":null,"bucket_regional_domain_name":"cloudfront-waf-enabled.s3.amazonaws.com","cors_rule":[],"force_destroy":false,"grant":[],"hosted_zone_id":"Z3AQBSTGFYJSTF","id":"cloudfront-waf-enabled","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":"{\"Id\":\"AllowCloudFrontOAI\",\"Statement\":[{\"Action\":\"s3:GetObject\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::cloudfront:user/CloudFront Origin Access Identity E2W22T67SMLIUK\"},\"Resource\":\"arn:aws:s3:::cloudfront-waf-enabled/*\",\"Sid\":\"AllowCloudFrontOAI\"}],\"Version\":\"2012-10-17\"}","region":"us-east-1","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[],"tags":{},"tags_all":{},"versioning":[{"enabled":false,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"after":{"acceleration_status":"","acl":"private","arn":"arn:aws:s3:::cloudfront-waf-enabled","bucket":"cloudfront-waf-enabled","bucket_domain_name":"cloudfront-waf-enabled.s3.amazonaws.com","bucket_prefix":null,"bucket_regional_domain_name":"cloudfront-waf-enabled.s3.amazonaws.com","cors_rule":[],"force_destroy":false,"grant":[],"hosted_zone_id":"Z3AQBSTGFYJSTF","id":"cloudfront-waf-enabled","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Id\": \"AllowCloudFrontOAI\",\n  \"Statement\": [\n    {\n      \"Sid\": \"AllowCloudFrontOAI\",\n      \"Effect\": \"Allow\",\n      \"Principal\": {\n        \"CanonicalUser\": \"ad898829feeddae43d706f7e9925cd54807ad1adfdef5bf0d9d84c662a4f26a9f7a0d13f719657ffdbed3927a297624c\"\n      },\n      \"Action\": \"s3:GetObject\",\n      \"Resource\": \"arn:aws:s3:::cloudfront-waf-enabled/*\"\n    }\n  ]\n}\n","region":"us-east-1","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[],"tags":{},"tags_all":{},"versioning":[],"website":[],"website_domain":null,"website_endpoint":null},"after_unknown":{}}},{"address":"aws_s3_bucket_public_access_block.cdn-content","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"cdn-content","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"block_public_acls":true,"block_public_policy":true,"bucket":"cloudfront-waf-enabled","id":"cloudfront-waf-enabled","ignore_public_acls":true,"restrict_public_buckets":true},"after":{"block_public_acls":true,"block_public_policy":true,"bucket":"cloudfront-waf-enabled","id":"cloudfront-waf-enabled","ignore_public_acls":true,"restrict_public_buckets":true},"after_unknown":{}}},{"address":"aws_wafv2_web_acl.test","mode":"managed","type":"aws_wafv2_web_acl","name":"test","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:wafv2:us-east-1:111111111111:global/webacl/managed-rule-example/74705c06-ab44-4de0-9b7f-31759bdc0ec1","capacity":700,"default_action":[{"allow":[{"custom_request_handling":[]}],"block":[]}],"description":"","id":"74705c06-ab44-4de0-9b7f-31759bdc0ec1","lock_token":"3d16396a-579e-48e5-8290-f98782a8291f","name":"managed-rule-example","rule":[{"action":[],"name":"rule-1","override_action":[{"count":[{}],"none":[]}],"priority":1,"statement":[{"and_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"managed_rule_group_statement":[{"excluded_rule":[{"name":"SizeRestrictions_QUERYSTRING"},{"name":"NoUserAgent_HEADER"}],"name":"AWSManagedRulesCommonRuleSet","scope_down_statement":[],"vendor_name":"AWS"}],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{"cloudwatch_metrics_enabled":false,"metric_name":"friendly-rule-metric-name","sampled_requests_enabled":false}]}],"scope":"CLOUDFRONT","tags":{},"tags_all":{},"visibility_config":[{"cloudwatch_metrics_enabled":false,"metric_name":"friendly-metric-name","sampled_requests_enabled":false}]},"after":{"arn":"arn:aws:wafv2:us-east-1:111111111111:global/webacl/managed-rule-example/74705c06-ab44-4de0-9b7f-31759bdc0ec1","capacity":700,"default_action":[{"allow":[{"custom_request_handling":[]}],"block":[]}],"description":"","id":"74705c06-ab44-4de0-9b7f-31759bdc0ec1","lock_token":"3d16396a-579e-48e5-8290-f98782a8291f","name":"managed-rule-example","rule":[{"action":[],"name":"rule-1","override_action":[{"count":[{}],"none":[]}],"priority":1,"statement":[{"and_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"managed_rule_group_statement":[{"excluded_rule":[{"name":"SizeRestrictions_QUERYSTRING"},{"name":"NoUserAgent_HEADER"}],"name":"AWSManagedRulesCommonRuleSet","scope_down_statement":[],"vendor_name":"AWS"}],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{"cloudwatch_metrics_enabled":false,"metric_name":"friendly-rule-metric-name","sampled_requests_enabled":false}]}],"scope":"CLOUDFRONT","tags":{},"tags_all":{},"visibility_config":[{"cloudwatch_metrics_enabled":false,"metric_name":"friendly-metric-name","sampled_requests_enabled":false}]},"after_unknown":{}}}],"prior_state":{"format_version":"0.1","terraform_version":"1.0.3","values":{"root_module":{"resources":[{"address":"aws_cloudfront_distribution.s3_distribution","mode":"managed","type":"aws_cloudfront_distribution","name":"s3_distribution","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"aliases":[],"arn":"arn:aws:cloudfront::111111111111:distribution/E7ORXDB14QKTS","caller_reference":"terraform-20210830083527770700000002","comment":"cloudfront-waf-enabled","custom_error_response":[{"error_caching_min_ttl":300,"error_code":403,"response_code":404,"response_page_path":"/404.html"}],"default_cache_behavior":[{"allowed_methods":["GET","HEAD","OPTIONS"],"cache_policy_id":"","cached_methods":["GET","HEAD"],"compress":false,"default_ttl":0,"field_level_encryption_id":"","forwarded_values":[{"cookies":[{"forward":"none","whitelisted_names":[]}],"headers":[],"query_string":false,"query_string_cache_keys":[]}],"function_association":[],"lambda_function_association":[],"max_ttl":0,"min_ttl":0,"origin_request_policy_id":"","realtime_log_config_arn":"","smooth_streaming":false,"target_origin_id":"cloudfront-dist-encrypted-bucket","trusted_key_groups":[],"trusted_signers":[],"viewer_protocol_policy":"https-only"}],"default_root_object":"index.html","domain_name":"d1v2co3fvgmzsi.cloudfront.net","enabled":true,"etag":"E5FC5A9Z77UDG","hosted_zone_id":"Z2FDTNDATAQYW2","http_version":"http2","id":"E7ORXDB14QKTS","in_progress_validation_batches":0,"is_ipv6_enabled":false,"last_modified_time":"2021-08-30 08:35:28.952 +0000 UTC","logging_config":[],"ordered_cache_behavior":[{"allowed_methods":["GET","HEAD","OPTIONS"],"cache_policy_id":"","cached_methods":["GET","HEAD","OPTIONS"],"compress":false,"default_ttl":0,"field_level_encryption_id":"","forwarded_values":[{"cookies":[{"forward":"none","whitelisted_names":[]}],"headers":["Origin"],"query_string":false,"query_string_cache_keys":[]}],"function_association":[],"lambda_function_association":[],"max_ttl":0,"min_ttl":0,"origin_request_policy_id":"","path_pattern":"/path01/*","realtime_log_config_arn":"","smooth_streaming":false,"target_origin_id":"cloudfront-dist-encrypted-bucket","trusted_key_groups":[],"trusted_signers":[],"viewer_protocol_policy":"https-only"},{"allowed_methods":["GET","HEAD","OPTIONS"],"cache_policy_id":"","cached_methods":["GET","HEAD"],"compress":false,"default_ttl":0,"field_level_encryption_id":"","forwarded_values":[{"cookies":[{"forward":"none","whitelisted_names":[]}],"headers":[],"query_string":false,"query_string_cache_keys":[]}],"function_association":[],"lambda_function_association":[],"max_ttl":0,"min_ttl":0,"origin_request_policy_id":"","path_pattern":"/path02/*","realtime_log_config_arn":"","smooth_streaming":false,"target_origin_id":"cloudfront-dist-encrypted-bucket","trusted_key_groups":[],"trusted_signers":[],"viewer_protocol_policy":"redirect-to-https"}],"origin":[{"connection_attempts":3,"connection_timeout":10,"custom_header":[],"custom_origin_config":[],"domain_name":"cloudfront-waf-enabled.s3.amazonaws.com","origin_id":"cloudfront-dist-encrypted-bucket","origin_path":"","origin_shield":[],"s3_origin_config":[{"origin_access_identity":"origin-access-identity/cloudfront/E2W22T67SMLIUK"}]}],"origin_group":[],"price_class":"PriceClass_200","restrictions":[{"geo_restriction":[{"locations":[],"restriction_type":"none"}]}],"retain_on_delete":false,"status":"Deployed","tags":{},"tags_all":{},"trusted_key_groups":[{"enabled":false,"items":[]}],"trusted_signers":[{"enabled":false,"items":[]}],"viewer_certificate":[{"acm_certificate_arn":"","cloudfront_default_certificate":true,"iam_certificate_id":"","minimum_protocol_version":"TLSv1","ssl_support_method":""}],"wait_for_deployment":true,"web_acl_id":"arn:aws:wafv2:us-east-1:111111111111:global/webacl/managed-rule-example/74705c06-ab44-4de0-9b7f-31759bdc0ec1"},"depends_on":["aws_s3_bucket.cdn-content","aws_wafv2_web_acl.test","aws_cloudfront_origin_access_identity.oai"]},{"address":"aws_cloudfront_origin_access_identity.oai","mode":"managed","type":"aws_cloudfront_origin_access_identity","name":"oai","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"caller_reference":"terraform-20210830083507422100000001","cloudfront_access_identity_path":"origin-access-identity/cloudfront/E2W22T67SMLIUK","comment":"cloudfront-waf-enabled","etag":"E20VHN0UG1T38R","iam_arn":"arn:aws:iam::cloudfront:user/CloudFront Origin Access Identity E2W22T67SMLIUK","id":"E2W22T67SMLIUK","s3_canonical_user_id":"ad898829feeddae43d706f7e9925cd54807ad1adfdef5bf0d9d84c662a4f26a9f7a0d13f719657ffdbed3927a297624c"}},{"address":"aws_s3_bucket.cdn-content","mode":"managed","type":"aws_s3_bucket","name":"cdn-content","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"acceleration_status":"","acl":"private","arn":"arn:aws:s3:::cloudfront-waf-enabled","bucket":"cloudfront-waf-enabled","bucket_domain_name":"cloudfront-waf-enabled.s3.amazonaws.com","bucket_prefix":null,"bucket_regional_domain_name":"cloudfront-waf-enabled.s3.amazonaws.com","cors_rule":[],"force_destroy":false,"grant":[],"hosted_zone_id":"Z3AQBSTGFYJSTF","id":"cloudfront-waf-enabled","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":"{\"Id\":\"AllowCloudFrontOAI\",\"Statement\":[{\"Action\":\"s3:GetObject\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::cloudfront:user/CloudFront Origin Access Identity E2W22T67SMLIUK\"},\"Resource\":\"arn:aws:s3:::cloudfront-waf-enabled/*\",\"Sid\":\"AllowCloudFrontOAI\"}],\"Version\":\"2012-10-17\"}","region":"us-east-1","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[],"tags":{},"tags_all":{},"versioning":[{"enabled":false,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"depends_on":["aws_cloudfront_origin_access_identity.oai"]},{"address":"aws_s3_bucket_public_access_block.cdn-content","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"cdn-content","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"block_public_acls":true,"block_public_policy":true,"bucket":"cloudfront-waf-enabled","id":"cloudfront-waf-enabled","ignore_public_acls":true,"restrict_public_buckets":true},"depends_on":["aws_cloudfront_origin_access_identity.oai","aws_s3_bucket.cdn-content"]},{"address":"aws_wafv2_web_acl.test","mode":"managed","type":"aws_wafv2_web_acl","name":"test","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:wafv2:us-east-1:111111111111:global/webacl/managed-rule-example/74705c06-ab44-4de0-9b7f-31759bdc0ec1","capacity":700,"default_action":[{"allow":[{"custom_request_handling":[]}],"block":[]}],"description":"","id":"74705c06-ab44-4de0-9b7f-31759bdc0ec1","lock_token":"3d16396a-579e-48e5-8290-f98782a8291f","name":"managed-rule-example","rule":[{"action":[],"name":"rule-1","override_action":[{"count":[{}],"none":[]}],"priority":1,"statement":[{"and_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"managed_rule_group_statement":[{"excluded_rule":[{"name":"SizeRestrictions_QUERYSTRING"},{"name":"NoUserAgent_HEADER"}],"name":"AWSManagedRulesCommonRuleSet","scope_down_statement":[],"vendor_name":"AWS"}],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{"cloudwatch_metrics_enabled":false,"metric_name":"friendly-rule-metric-name","sampled_requests_enabled":false}]}],"scope":"CLOUDFRONT","tags":{},"tags_all":{},"visibility_config":[{"cloudwatch_metrics_enabled":false,"metric_name":"friendly-metric-name","sampled_requests_enabled":false}]}}]}}},"configuration":{"root_module":{"resources":[{"address":"aws_cloudfront_distribution.s3_distribution","mode":"managed","type":"aws_cloudfront_distribution","name":"s3_distribution","provider_config_key":"aws","expressions":{"comment":{"references":["local.name"]},"custom_error_response":[{"error_caching_min_ttl":{"constant_value":300},"error_code":{"constant_value":403},"response_code":{"constant_value":404},"response_page_path":{"constant_value":"/404.html"}}],"default_cache_behavior":[{"allowed_methods":{"constant_value":["GET","HEAD","OPTIONS"]},"cached_methods":{"constant_value":["GET","HEAD"]},"forwarded_values":[{"cookies":[{"forward":{"constant_value":"none"}}],"query_string":{"constant_value":false}}],"target_origin_id":{"references":["local.s3_origin_id"]},"viewer_protocol_policy":{"constant_value":"https-only"}}],"default_root_object":{"constant_value":"index.html"},"enabled":{"constant_value":true},"ordered_cache_behavior":[{"allowed_methods":{"constant_value":["GET","HEAD","OPTIONS"]},"cached_methods":{"constant_value":["GET","HEAD","OPTIONS"]},"forwarded_values":[{"cookies":[{"forward":{"constant_value":"none"}}],"headers":{"constant_value":["Origin"]},"query_string":{"constant_value":false}}],"path_pattern":{"constant_value":"/path01/*"},"target_origin_id":{"references":["local.s3_origin_id"]},"viewer_protocol_policy":{"constant_value":"https-only"}},{"allowed_methods":{"constant_value":["GET","HEAD","OPTIONS"]},"cached_methods":{"constant_value":["GET","HEAD"]},"forwarded_values":[{"cookies":[{"forward":{"constant_value":"none"}}],"query_string":{"constant_value":false}}],"path_pattern":{"constant_value":"/path02/*"},"target_origin_id":{"references":["local.s3_origin_id"]},"viewer_protocol_policy":{"constant_value":"redirect-to-https"}}],"origin":[{"domain_name":{"references":["aws_s3_bucket.cdn-content"]},"origin_id":{"references":["local.s3_origin_id"]},"s3_origin_config":[{"origin_access_identity":{"references":["aws_cloudfront_origin_access_identity.oai"]}}]}],"price_class":{"constant_value":"PriceClass_200"},"restrictions":[{"geo_restriction":[{"restriction_type":{"constant_value":"none"}}]}],"viewer_certificate":[{"cloudfront_default_certificate":{"constant_value":true}}],"web_acl_id":{"references":["aws_wafv2_web_acl.test"]}},"schema_version":1,"raw_data":{"FileName":"main.tf","StartLine":40,"EndLine":122}},{"address":"aws_cloudfront_origin_access_identity.oai","mode":"managed","type":"aws_cloudfront_origin_access_identity","name":"oai","provider_config_key":"aws","expressions":{"comment":{"references":["local.name"]}},"schema_version":0,"raw_data":{"FileName":"main.tf","StartLine":36,"EndLine":38}},{"address":"aws_s3_bucket.cdn-content","mode":"managed","type":"aws_s3_bucket","name":"cdn-content","provider_config_key":"aws","expressions":{"acl":{"constant_value":"private"},"bucket":{"references":["local.name"]},"policy":{"references":["aws_cloudfront_origin_access_identity.oai","local.name"]}},"schema_version":0,"raw_data":{"FileName":"main.tf","StartLine":6,"EndLine":26}},{"address":"aws_s3_bucket_public_access_block.cdn-content","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"cdn-content","provider_config_key":"aws","expressions":{"block_public_acls":{"constant_value":true},"block_public_policy":{"constant_value":true},"bucket":{"references":["aws_s3_bucket.cdn-content"]},"ignore_public_acls":{"constant_value":true},"restrict_public_buckets":{"constant_value":true}},"schema_version":0,"raw_data":{"FileName":"main.tf","StartLine":28,"EndLine":34}},{"address":"aws_wafv2_web_acl.test","mode":"managed","type":"aws_wafv2_web_acl","name":"test","provider_config_key":"aws","expressions":{"default_action":[{"allow":[{}]}],"name":{"constant_value":"managed-rule-example"},"rule":[{"name":{"constant_value":"rule-1"},"override_action":[{"count":[{}]}],"priority":{"constant_value":1},"statement":[{"managed_rule_group_statement":[{"excluded_rule":[{"name":{"constant_value":"SizeRestrictions_QUERYSTRING"}},{"name":{"constant_value":"NoUserAgent_HEADER"}}],"name":{"constant_value":"AWSManagedRulesCommonRuleSet"},"vendor_name":{"constant_value":"AWS"}}]}],"visibility_config":[{"cloudwatch_metrics_enabled":{"constant_value":false},"metric_name":{"constant_value":"friendly-rule-metric-name"},"sampled_requests_enabled":{"constant_value":false}}]}],"scope":{"constant_value":"CLOUDFRONT"},"visibility_config":[{"cloudwatch_metrics_enabled":{"constant_value":false},"metric_name":{"constant_value":"friendly-metric-name"},"sampled_requests_enabled":{"constant_value":false}}]},"schema_version":0,"raw_data":{"FileName":"main.tf","StartLine":124,"EndLine":167}}]}}}
