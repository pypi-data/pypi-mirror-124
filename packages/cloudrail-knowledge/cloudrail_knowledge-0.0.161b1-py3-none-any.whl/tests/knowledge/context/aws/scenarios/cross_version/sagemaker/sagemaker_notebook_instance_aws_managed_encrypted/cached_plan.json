{"format_version":"0.1","terraform_version":"0.13.4","planned_values":{"root_module":{"resources":[{"address":"aws_iam_role.test","mode":"managed","type":"aws_iam_role","name":"test","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"assume_role_policy":"{\n\"Version\": \"2012-10-17\",\n\"Statement\": [\n    {\n    \"Action\": \"sts:AssumeRole\",\n    \"Principal\": {\n        \"Service\": \"sagemaker.amazonaws.com\"\n    },\n    \"Effect\": \"Allow\",\n    \"Sid\": \"\"\n    }\n]\n}\n","description":null,"force_detach_policies":false,"inline_policy":[],"max_session_duration":3600,"name":"test_sagemaker_role","name_prefix":null,"path":"/","permissions_boundary":null,"tags":null}},{"address":"aws_iam_role_policy_attachment.test-attach","mode":"managed","type":"aws_iam_role_policy_attachment","name":"test-attach","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"policy_arn":"arn:aws:iam::aws:policy/AmazonSageMakerFullAccess","role":"test_sagemaker_role"}},{"address":"aws_sagemaker_notebook_instance.test","mode":"managed","type":"aws_sagemaker_notebook_instance","name":"test","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"additional_code_repositories":null,"default_code_repository":null,"direct_internet_access":"Enabled","instance_type":"ml.t2.medium","kms_key_id":null,"lifecycle_config_name":null,"name":"my-notebook-instance","role_arn":"aws_iam_role.test.arn","root_access":"Enabled","subnet_id":null,"tags":null,"volume_size":5}}]}},"resource_changes":[{"address":"aws_iam_role.test","mode":"managed","type":"aws_iam_role","name":"test","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\n\"Version\": \"2012-10-17\",\n\"Statement\": [\n    {\n    \"Action\": \"sts:AssumeRole\",\n    \"Principal\": {\n        \"Service\": \"sagemaker.amazonaws.com\"\n    },\n    \"Effect\": \"Allow\",\n    \"Sid\": \"\"\n    }\n]\n}\n","description":null,"force_detach_policies":false,"inline_policy":[],"max_session_duration":3600,"name":"test_sagemaker_role","name_prefix":null,"path":"/","permissions_boundary":null,"tags":null},"after_unknown":{"arn":true,"create_date":true,"id":true,"inline_policy":[],"managed_policy_arns":true,"tags_all":true,"unique_id":true}}},{"address":"aws_iam_role_policy_attachment.test-attach","mode":"managed","type":"aws_iam_role_policy_attachment","name":"test-attach","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"policy_arn":"arn:aws:iam::aws:policy/AmazonSageMakerFullAccess","role":"test_sagemaker_role"},"after_unknown":{"id":true}}},{"address":"aws_sagemaker_notebook_instance.test","mode":"managed","type":"aws_sagemaker_notebook_instance","name":"test","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"additional_code_repositories":null,"default_code_repository":null,"direct_internet_access":"Enabled","instance_type":"ml.t2.medium","kms_key_id":null,"lifecycle_config_name":null,"name":"my-notebook-instance","role_arn":"aws_iam_role.test.arn","root_access":"Enabled","subnet_id":null,"tags":null,"volume_size":5},"after_unknown":{"arn":true,"id":true,"network_interface_id":true,"security_groups":true,"tags_all":true,"url":true}}}],"prior_state":{"format_version":"0.1","terraform_version":"0.13.4","values":{"root_module":{"resources":[{"address":"data.aws_iam_policy.AmazonSageMakerFullAccess","mode":"data","type":"aws_iam_policy","name":"AmazonSageMakerFullAccess","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::aws:policy/AmazonSageMakerFullAccess","description":"Provides full access to Amazon SageMaker via the AWS Management Console and SDK. Also provides select access to related services (e.g., S3, ECR, CloudWatch Logs).","id":"arn:aws:iam::aws:policy/AmazonSageMakerFullAccess","name":"AmazonSageMakerFullAccess","path":"/","path_prefix":null,"policy":"{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"sagemaker:*\"\n            ],\n            \"NotResource\": [\n                \"arn:aws:sagemaker:*:*:domain/*\",\n                \"arn:aws:sagemaker:*:*:user-profile/*\",\n                \"arn:aws:sagemaker:*:*:app/*\",\n                \"arn:aws:sagemaker:*:*:flow-definition/*\"\n            ]\n        },\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"sagemaker:CreatePresignedDomainUrl\",\n                \"sagemaker:DescribeDomain\",\n                \"sagemaker:ListDomains\",\n                \"sagemaker:DescribeUserProfile\",\n                \"sagemaker:ListUserProfiles\",\n                \"sagemaker:*App\",\n                \"sagemaker:ListApps\"\n            ],\n            \"Resource\": \"*\"\n        },\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": \"sagemaker:*\",\n            \"Resource\": [\n                \"arn:aws:sagemaker:*:*:flow-definition/*\"\n            ],\n            \"Condition\": {\n                \"StringEqualsIfExists\": {\n                    \"sagemaker:WorkteamType\": [\n                        \"private-crowd\",\n                        \"vendor-crowd\"\n                    ]\n                }\n            }\n        },\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"application-autoscaling:DeleteScalingPolicy\",\n                \"application-autoscaling:DeleteScheduledAction\",\n                \"application-autoscaling:DeregisterScalableTarget\",\n                \"application-autoscaling:DescribeScalableTargets\",\n                \"application-autoscaling:DescribeScalingActivities\",\n                \"application-autoscaling:DescribeScalingPolicies\",\n                \"application-autoscaling:DescribeScheduledActions\",\n                \"application-autoscaling:PutScalingPolicy\",\n                \"application-autoscaling:PutScheduledAction\",\n                \"application-autoscaling:RegisterScalableTarget\",\n                \"aws-marketplace:ViewSubscriptions\",\n                \"cloudformation:GetTemplateSummary\",\n                \"cloudwatch:DeleteAlarms\",\n                \"cloudwatch:DescribeAlarms\",\n                \"cloudwatch:GetMetricData\",\n                \"cloudwatch:GetMetricStatistics\",\n                \"cloudwatch:ListMetrics\",\n                \"cloudwatch:PutMetricAlarm\",\n                \"cloudwatch:PutMetricData\",\n                \"codecommit:BatchGetRepositories\",\n                \"codecommit:CreateRepository\",\n                \"codecommit:GetRepository\",\n                \"codecommit:List*\",\n                \"cognito-idp:AdminAddUserToGroup\",\n                \"cognito-idp:AdminCreateUser\",\n                \"cognito-idp:AdminDeleteUser\",\n                \"cognito-idp:AdminDisableUser\",\n                \"cognito-idp:AdminEnableUser\",\n                \"cognito-idp:AdminRemoveUserFromGroup\",\n                \"cognito-idp:CreateGroup\",\n                \"cognito-idp:CreateUserPool\",\n                \"cognito-idp:CreateUserPoolClient\",\n                \"cognito-idp:CreateUserPoolDomain\",\n                \"cognito-idp:DescribeUserPool\",\n                \"cognito-idp:DescribeUserPoolClient\",\n                \"cognito-idp:List*\",\n                \"cognito-idp:UpdateUserPool\",\n                \"cognito-idp:UpdateUserPoolClient\",\n                \"ec2:CreateNetworkInterface\",\n                \"ec2:CreateNetworkInterfacePermission\",\n                \"ec2:CreateVpcEndpoint\",\n                \"ec2:DeleteNetworkInterface\",\n                \"ec2:DeleteNetworkInterfacePermission\",\n                \"ec2:DescribeDhcpOptions\",\n                \"ec2:DescribeNetworkInterfaces\",\n                \"ec2:DescribeRouteTables\",\n                \"ec2:DescribeSecurityGroups\",\n                \"ec2:DescribeSubnets\",\n                \"ec2:DescribeVpcEndpoints\",\n                \"ec2:DescribeVpcs\",\n                \"ecr:BatchCheckLayerAvailability\",\n                \"ecr:BatchGetImage\",\n                \"ecr:CreateRepository\",\n                \"ecr:Describe*\",\n                \"ecr:GetAuthorizationToken\",\n                \"ecr:GetDownloadUrlForLayer\",\n                \"ecr:StartImageScan\",\n                \"elastic-inference:Connect\",\n                \"elasticfilesystem:DescribeFileSystems\",\n                \"elasticfilesystem:DescribeMountTargets\",\n                \"fsx:DescribeFileSystems\",\n                \"glue:CreateJob\",\n                \"glue:DeleteJob\",\n                \"glue:GetJob*\",\n                \"glue:GetTable*\",\n                \"glue:GetWorkflowRun\",\n                \"glue:ResetJobBookmark\",\n                \"glue:StartJobRun\",\n                \"glue:StartWorkflowRun\",\n                \"glue:UpdateJob\",\n                \"groundtruthlabeling:*\",\n                \"iam:ListRoles\",\n                \"kms:DescribeKey\",\n                \"kms:ListAliases\",\n                \"lambda:ListFunctions\",\n                \"logs:CreateLogDelivery\",\n                \"logs:CreateLogGroup\",\n                \"logs:CreateLogStream\",\n                \"logs:DeleteLogDelivery\",\n                \"logs:Describe*\",\n                \"logs:GetLogDelivery\",\n                \"logs:GetLogEvents\",\n                \"logs:ListLogDeliveries\",\n                \"logs:PutLogEvents\",\n                \"logs:PutResourcePolicy\",\n                \"logs:UpdateLogDelivery\",\n                \"robomaker:CreateSimulationApplication\",\n                \"robomaker:DescribeSimulationApplication\",\n                \"robomaker:DeleteSimulationApplication\",\n                \"robomaker:CreateSimulationJob\",\n                \"robomaker:DescribeSimulationJob\",\n                \"robomaker:CancelSimulationJob\",\n                \"secretsmanager:ListSecrets\",\n                \"servicecatalog:Describe*\",\n                \"servicecatalog:List*\",\n                \"servicecatalog:ScanProvisionedProducts\",\n                \"servicecatalog:SearchProducts\",\n                \"servicecatalog:SearchProvisionedProducts\",\n                \"sns:ListTopics\",\n                \"tag:GetResources\"\n            ],\n            \"Resource\": \"*\"\n        },\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"ecr:SetRepositoryPolicy\",\n                \"ecr:CompleteLayerUpload\",\n                \"ecr:BatchDeleteImage\",\n                \"ecr:UploadLayerPart\",\n                \"ecr:DeleteRepositoryPolicy\",\n                \"ecr:InitiateLayerUpload\",\n                \"ecr:DeleteRepository\",\n                \"ecr:PutImage\"\n            ],\n            \"Resource\": [\n                \"arn:aws:ecr:*:*:repository/*sagemaker*\"\n            ]\n        },\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"codecommit:GitPull\",\n                \"codecommit:GitPush\"\n            ],\n            \"Resource\": [\n                \"arn:aws:codecommit:*:*:*sagemaker*\",\n                \"arn:aws:codecommit:*:*:*SageMaker*\",\n                \"arn:aws:codecommit:*:*:*Sagemaker*\"\n            ]\n        },\n        {\n            \"Action\": [\n                \"codebuild:BatchGetBuilds\",\n                \"codebuild:StartBuild\"\n            ],\n            \"Resource\": [\n                \"arn:aws:codebuild:*:*:project/sagemaker*\",\n                \"arn:aws:codebuild:*:*:build/*\"\n            ],\n            \"Effect\": \"Allow\"\n        },\n        {\n            \"Action\": [\n                \"states:DescribeExecution\",\n                \"states:GetExecutionHistory\",\n                \"states:StartExecution\",\n                \"states:StopExecution\",\n                \"states:UpdateStateMachine\"\n            ],\n            \"Resource\": [\n                \"arn:aws:states:*:*:statemachine:*sagemaker*\",\n                \"arn:aws:states:*:*:execution:*sagemaker*:*\"\n            ],\n            \"Effect\": \"Allow\"\n        },\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"secretsmanager:DescribeSecret\",\n                \"secretsmanager:GetSecretValue\",\n                \"secretsmanager:CreateSecret\"\n            ],\n            \"Resource\": [\n                \"arn:aws:secretsmanager:*:*:secret:AmazonSageMaker-*\"\n            ]\n        },\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"secretsmanager:DescribeSecret\",\n                \"secretsmanager:GetSecretValue\"\n            ],\n            \"Resource\": \"*\",\n            \"Condition\": {\n                \"StringEquals\": {\n                    \"secretsmanager:ResourceTag/SageMaker\": \"true\"\n                }\n            }\n        },\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"servicecatalog:ProvisionProduct\"\n            ],\n            \"Resource\": \"*\"\n        },\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"servicecatalog:TerminateProvisionedProduct\",\n                \"servicecatalog:UpdateProvisionedProduct\"\n            ],\n            \"Resource\": \"*\",\n            \"Condition\": {\n                \"StringEquals\": {\n                    \"servicecatalog:userLevel\": \"self\"\n                }\n            }\n        },\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"s3:GetObject\",\n                \"s3:PutObject\",\n                \"s3:DeleteObject\",\n                \"s3:AbortMultipartUpload\"\n            ],\n            \"Resource\": [\n                \"arn:aws:s3:::*SageMaker*\",\n                \"arn:aws:s3:::*Sagemaker*\",\n                \"arn:aws:s3:::*sagemaker*\",\n                \"arn:aws:s3:::*aws-glue*\"\n            ]\n        },\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"s3:GetObject\"\n            ],\n            \"Resource\": \"*\",\n            \"Condition\": {\n                \"StringEqualsIgnoreCase\": {\n                    \"s3:ExistingObjectTag/SageMaker\": \"true\"\n                }\n            }\n        },\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"s3:GetObject\"\n            ],\n            \"Resource\": \"*\",\n            \"Condition\": {\n                \"StringEquals\": {\n                    \"s3:ExistingObjectTag/servicecatalog:provisioning\": \"true\"\n                }\n            }\n        },\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"s3:CreateBucket\",\n                \"s3:GetBucketLocation\",\n                \"s3:ListBucket\",\n                \"s3:ListAllMyBuckets\",\n                \"s3:GetBucketCors\",\n                \"s3:PutBucketCors\"\n            ],\n            \"Resource\": \"*\"\n        },\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"s3:GetBucketAcl\",\n                \"s3:PutObjectAcl\"\n            ],\n            \"Resource\": [\n                \"arn:aws:s3:::*SageMaker*\",\n                \"arn:aws:s3:::*Sagemaker*\",\n                \"arn:aws:s3:::*sagemaker*\"\n            ]\n        },\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"lambda:InvokeFunction\"\n            ],\n            \"Resource\": [\n                \"arn:aws:lambda:*:*:function:*SageMaker*\",\n                \"arn:aws:lambda:*:*:function:*sagemaker*\",\n                \"arn:aws:lambda:*:*:function:*Sagemaker*\",\n                \"arn:aws:lambda:*:*:function:*LabelingFunction*\"\n            ]\n        },\n        {\n            \"Action\": \"iam:CreateServiceLinkedRole\",\n            \"Effect\": \"Allow\",\n            \"Resource\": \"arn:aws:iam::*:role/aws-service-role/sagemaker.application-autoscaling.amazonaws.com/AWSServiceRoleForApplicationAutoScaling_SageMakerEndpoint\",\n            \"Condition\": {\n                \"StringLike\": {\n                    \"iam:AWSServiceName\": \"sagemaker.application-autoscaling.amazonaws.com\"\n                }\n            }\n        },\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": \"iam:CreateServiceLinkedRole\",\n            \"Resource\": \"*\",\n            \"Condition\": {\n                \"StringEquals\": {\n                    \"iam:AWSServiceName\": \"robomaker.amazonaws.com\"\n                }\n            }\n        },\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"sns:Subscribe\",\n                \"sns:CreateTopic\"\n            ],\n            \"Resource\": [\n                \"arn:aws:sns:*:*:*SageMaker*\",\n                \"arn:aws:sns:*:*:*Sagemaker*\",\n                \"arn:aws:sns:*:*:*sagemaker*\"\n            ]\n        },\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"iam:PassRole\"\n            ],\n            \"Resource\": \"arn:aws:iam::*:role/*\",\n            \"Condition\": {\n                \"StringEquals\": {\n                    \"iam:PassedToService\": [\n                        \"sagemaker.amazonaws.com\",\n                        \"glue.amazonaws.com\",\n                        \"robomaker.amazonaws.com\",\n                        \"states.amazonaws.com\"\n                    ]\n                }\n            }\n        },\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"athena:ListDataCatalogs\",\n                \"athena:ListDatabases\",\n                \"athena:ListTableMetadata\",\n                \"athena:GetQueryExecution\",\n                \"athena:GetQueryResults\",\n                \"athena:StartQueryExecution\",\n                \"athena:StopQueryExecution\"\n            ],\n            \"Resource\": [\n                \"*\"\n            ]\n        },\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"glue:CreateTable\"\n            ],\n            \"Resource\": [\n                \"arn:aws:glue:*:*:table/*/sagemaker_tmp_*\",\n                \"arn:aws:glue:*:*:table/sagemaker_featurestore/*\",\n                \"arn:aws:glue:*:*:catalog\",\n                \"arn:aws:glue:*:*:database/*\"\n            ]\n        },\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"glue:DeleteTable\"\n            ],\n            \"Resource\": [\n                \"arn:aws:glue:*:*:table/*/sagemaker_tmp_*\",\n                \"arn:aws:glue:*:*:catalog\",\n                \"arn:aws:glue:*:*:database/*\"\n            ]\n        },\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"glue:GetDatabases\",\n                \"glue:GetTable\",\n                \"glue:GetTables\"\n            ],\n            \"Resource\": [\n                \"arn:aws:glue:*:*:table/*\",\n                \"arn:aws:glue:*:*:catalog\",\n                \"arn:aws:glue:*:*:database/*\"\n            ]\n        },\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"glue:CreateDatabase\",\n                \"glue:GetDatabase\"\n            ],\n            \"Resource\": [\n                \"arn:aws:glue:*:*:catalog\",\n                \"arn:aws:glue:*:*:database/sagemaker_featurestore\",\n                \"arn:aws:glue:*:*:database/sagemaker_processing\",\n                \"arn:aws:glue:*:*:database/default\",\n                \"arn:aws:glue:*:*:database/sagemaker_data_wrangler\"\n            ]\n        },\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"redshift-data:ExecuteStatement\",\n                \"redshift-data:DescribeStatement\",\n                \"redshift-data:CancelStatement\",\n                \"redshift-data:GetStatementResult\",\n                \"redshift-data:ListSchemas\",\n                \"redshift-data:ListTables\"\n            ],\n            \"Resource\": [\n                \"*\"\n            ]\n        },\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"redshift:GetClusterCredentials\"\n            ],\n            \"Resource\": [\n                \"arn:aws:redshift:*:*:dbuser:*/sagemaker_access*\",\n                \"arn:aws:redshift:*:*:dbname:*\"\n            ]\n        }\n    ]\n}","policy_id":"ANPAJZ5IWYMXO5QDB4QOG","tags":{}}}]}}},"configuration":{"provider_config":{"aws":{"name":"aws","expressions":{"region":{"constant_value":"us-east-1"}}}},"root_module":{"resources":[{"address":"aws_iam_role.test","mode":"managed","type":"aws_iam_role","name":"test","provider_config_key":"aws","expressions":{"assume_role_policy":{"constant_value":"{\n\"Version\": \"2012-10-17\",\n\"Statement\": [\n    {\n    \"Action\": \"sts:AssumeRole\",\n    \"Principal\": {\n        \"Service\": \"sagemaker.amazonaws.com\"\n    },\n    \"Effect\": \"Allow\",\n    \"Sid\": \"\"\n    }\n]\n}\n"},"name":{"constant_value":"test_sagemaker_role"}},"schema_version":0,"raw_data":{"FileName":"main.tf","StartLine":5,"EndLine":22}},{"address":"aws_iam_role_policy_attachment.test-attach","mode":"managed","type":"aws_iam_role_policy_attachment","name":"test-attach","provider_config_key":"aws","expressions":{"policy_arn":{"references":["data.aws_iam_policy.AmazonSageMakerFullAccess"]},"role":{"references":["aws_iam_role.test"]}},"schema_version":0,"raw_data":{"FileName":"main.tf","StartLine":24,"EndLine":27}},{"address":"aws_sagemaker_notebook_instance.test","mode":"managed","type":"aws_sagemaker_notebook_instance","name":"test","provider_config_key":"aws","expressions":{"instance_type":{"constant_value":"ml.t2.medium"},"name":{"constant_value":"my-notebook-instance"},"role_arn":{"references":["aws_iam_role.test"]}},"schema_version":0,"raw_data":{"FileName":"main.tf","StartLine":29,"EndLine":33}},{"address":"data.aws_iam_policy.AmazonSageMakerFullAccess","mode":"data","type":"aws_iam_policy","name":"AmazonSageMakerFullAccess","provider_config_key":"aws","expressions":{"arn":{"constant_value":"arn:aws:iam::aws:policy/AmazonSageMakerFullAccess"}},"schema_version":0,"raw_data":{"FileName":"main.tf","StartLine":1,"EndLine":3}}]}}}
