{"format_version":"0.1","terraform_version":"0.13.4","planned_values":{"root_module":{"resources":[{"address":"aws_iam_policy.user-1-policy","mode":"managed","type":"aws_iam_policy","name":"user-1-policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"A test policy","name":"user-1-policy","name_prefix":null,"path":"/","policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Id\": \"default\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Deny\",\n      \"Action\": [\"lambda:InvokeFunction\"],\n      \"Resource\": [\"arn:aws:lambda:us-east-1:553432699559:function:my-lambda:v1\"]\n    }\n  ]\n}\n","tags":null}},{"address":"aws_iam_role.lambda-role","mode":"managed","type":"aws_iam_role","name":"lambda-role","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"assume_role_policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"lambda.amazonaws.com\"\n      },\n      \"Effect\": \"Allow\",\n      \"Sid\": \"\"\n    }\n  ]\n}\n","description":null,"force_detach_policies":false,"inline_policy":[],"max_session_duration":3600,"name":"lambda-role","name_prefix":null,"path":"/","permissions_boundary":null,"tags":null}},{"address":"aws_iam_user.user-1","mode":"managed","type":"aws_iam_user","name":"user-1","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"force_destroy":false,"name":"user-1","path":"/","permissions_boundary":null,"tags":null}},{"address":"aws_iam_user_policy_attachment.user-1-attach","mode":"managed","type":"aws_iam_user_policy_attachment","name":"user-1-attach","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"policy_arn":"aws_iam_policy.user-1-policy.arn","user":"user-1"}},{"address":"aws_lambda_alias.my-lambda-alias","mode":"managed","type":"aws_lambda_alias","name":"my-lambda-alias","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"a sample description","function_name":"my-lambda","function_version":"$LATEST","name":"v1","routing_config":[]}},{"address":"aws_lambda_function.my-lambda","mode":"managed","type":"aws_lambda_function","name":"my-lambda","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"code_signing_config_arn":null,"dead_letter_config":[],"description":null,"environment":[],"file_system_config":[],"filename":"lambda.zip","function_name":"my-lambda","handler":"lambda_function.lambda_handler","image_config":[],"image_uri":null,"kms_key_arn":null,"layers":null,"memory_size":128,"package_type":"Zip","publish":false,"reserved_concurrent_executions":-1,"role":"aws_iam_role.lambda-role.arn","runtime":"python3.8","s3_bucket":null,"s3_key":null,"s3_object_version":null,"tags":null,"timeout":3,"timeouts":null,"tracing_config":[],"vpc_config":[]}},{"address":"aws_lambda_permission.allow-user-1","mode":"managed","type":"aws_lambda_permission","name":"allow-user-1","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"action":"lambda:InvokeFunction","event_source_token":null,"function_name":"my-lambda","principal":"553432699559","qualifier":"v1","source_account":null,"source_arn":"aws_iam_role.lambda-role.arn","statement_id":"AllowUser1Execution","statement_id_prefix":null}}]}},"resource_changes":[{"address":"aws_iam_policy.user-1-policy","mode":"managed","type":"aws_iam_policy","name":"user-1-policy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"A test policy","name":"user-1-policy","name_prefix":null,"path":"/","policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Id\": \"default\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Deny\",\n      \"Action\": [\"lambda:InvokeFunction\"],\n      \"Resource\": [\"arn:aws:lambda:us-east-1:553432699559:function:my-lambda:v1\"]\n    }\n  ]\n}\n","tags":null},"after_unknown":{"arn":true,"id":true,"policy_id":true,"tags_all":true}}},{"address":"aws_iam_role.lambda-role","mode":"managed","type":"aws_iam_role","name":"lambda-role","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"lambda.amazonaws.com\"\n      },\n      \"Effect\": \"Allow\",\n      \"Sid\": \"\"\n    }\n  ]\n}\n","description":null,"force_detach_policies":false,"inline_policy":[],"max_session_duration":3600,"name":"lambda-role","name_prefix":null,"path":"/","permissions_boundary":null,"tags":null},"after_unknown":{"arn":true,"create_date":true,"id":true,"inline_policy":[],"managed_policy_arns":true,"tags_all":true,"unique_id":true}}},{"address":"aws_iam_user.user-1","mode":"managed","type":"aws_iam_user","name":"user-1","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"force_destroy":false,"name":"user-1","path":"/","permissions_boundary":null,"tags":null},"after_unknown":{"arn":true,"id":true,"tags_all":true,"unique_id":true}}},{"address":"aws_iam_user_policy_attachment.user-1-attach","mode":"managed","type":"aws_iam_user_policy_attachment","name":"user-1-attach","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"policy_arn":"aws_iam_policy.user-1-policy.arn","user":"user-1"},"after_unknown":{"id":true}}},{"address":"aws_lambda_alias.my-lambda-alias","mode":"managed","type":"aws_lambda_alias","name":"my-lambda-alias","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"a sample description","function_name":"my-lambda","function_version":"$LATEST","name":"v1","routing_config":[]},"after_unknown":{"arn":true,"id":true,"invoke_arn":true,"routing_config":[]}}},{"address":"aws_lambda_function.my-lambda","mode":"managed","type":"aws_lambda_function","name":"my-lambda","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"code_signing_config_arn":null,"dead_letter_config":[],"description":null,"environment":[],"file_system_config":[],"filename":"lambda.zip","function_name":"my-lambda","handler":"lambda_function.lambda_handler","image_config":[],"image_uri":null,"kms_key_arn":null,"layers":null,"memory_size":128,"package_type":"Zip","publish":false,"reserved_concurrent_executions":-1,"role":"aws_iam_role.lambda-role.arn","runtime":"python3.8","s3_bucket":null,"s3_key":null,"s3_object_version":null,"tags":null,"timeout":3,"timeouts":null,"tracing_config":[],"vpc_config":[]},"after_unknown":{"arn":true,"dead_letter_config":[],"environment":[],"file_system_config":[],"id":true,"image_config":[],"invoke_arn":true,"last_modified":true,"qualified_arn":true,"signing_job_arn":true,"signing_profile_version_arn":true,"source_code_hash":true,"source_code_size":true,"tags_all":true,"tracing_config":[],"version":true,"vpc_config":[]}}},{"address":"aws_lambda_permission.allow-user-1","mode":"managed","type":"aws_lambda_permission","name":"allow-user-1","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"action":"lambda:InvokeFunction","event_source_token":null,"function_name":"my-lambda","principal":"553432699559","qualifier":"v1","source_account":null,"source_arn":"aws_iam_role.lambda-role.arn","statement_id":"AllowUser1Execution","statement_id_prefix":null},"after_unknown":{"id":true}}}],"prior_state":{"format_version":"0.1","terraform_version":"0.13.5","values":{"root_module":{"resources":[{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"account_id":"553432699559","arn":"arn:aws:sts::553432699559:assumed-role/AWSReservedSSO_admin_in_develop_cdd58565acef883e/tomer.v@indeni.com","id":"553432699559","user_id":"AROAYBWZI2KTZGGU7ZPNF:tomer.v@indeni.com"}}]}}},"configuration":{"root_module":{"resources":[{"address":"aws_iam_policy.user-1-policy","mode":"managed","type":"aws_iam_policy","name":"user-1-policy","provider_config_key":"aws","expressions":{"description":{"constant_value":"A test policy"},"name":{"constant_value":"user-1-policy"},"policy":{"references":["data.aws_caller_identity.current"]}},"schema_version":0,"raw_data":{"FileName":"main.tf","StartLine":51,"EndLine":68}},{"address":"aws_iam_role.lambda-role","mode":"managed","type":"aws_iam_role","name":"lambda-role","provider_config_key":"aws","expressions":{"assume_role_policy":{"constant_value":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"lambda.amazonaws.com\"\n      },\n      \"Effect\": \"Allow\",\n      \"Sid\": \"\"\n    }\n  ]\n}\n"},"name":{"constant_value":"lambda-role"}},"schema_version":0,"raw_data":{"FileName":"main.tf","StartLine":11,"EndLine":29}},{"address":"aws_iam_user.user-1","mode":"managed","type":"aws_iam_user","name":"user-1","provider_config_key":"aws","expressions":{"name":{"constant_value":"user-1"}},"schema_version":0,"raw_data":{"FileName":"main.tf","StartLine":47,"EndLine":49}},{"address":"aws_iam_user_policy_attachment.user-1-attach","mode":"managed","type":"aws_iam_user_policy_attachment","name":"user-1-attach","provider_config_key":"aws","expressions":{"policy_arn":{"references":["aws_iam_policy.user-1-policy"]},"user":{"references":["aws_iam_user.user-1"]}},"schema_version":0,"raw_data":{"FileName":"main.tf","StartLine":70,"EndLine":73}},{"address":"aws_lambda_alias.my-lambda-alias","mode":"managed","type":"aws_lambda_alias","name":"my-lambda-alias","provider_config_key":"aws","expressions":{"description":{"constant_value":"a sample description"},"function_name":{"references":["aws_lambda_function.my-lambda"]},"function_version":{"constant_value":"$LATEST"},"name":{"constant_value":"v1"}},"schema_version":0,"raw_data":{"FileName":"main.tf","StartLine":40,"EndLine":45}},{"address":"aws_lambda_function.my-lambda","mode":"managed","type":"aws_lambda_function","name":"my-lambda","provider_config_key":"aws","expressions":{"filename":{"constant_value":"lambda.zip"},"function_name":{"constant_value":"my-lambda"},"handler":{"constant_value":"lambda_function.lambda_handler"},"role":{"references":["aws_iam_role.lambda-role"]},"runtime":{"constant_value":"python3.8"}},"schema_version":0,"raw_data":{"FileName":"main.tf","StartLine":3,"EndLine":9}},{"address":"aws_lambda_permission.allow-user-1","mode":"managed","type":"aws_lambda_permission","name":"allow-user-1","provider_config_key":"aws","expressions":{"action":{"constant_value":"lambda:InvokeFunction"},"function_name":{"references":["aws_lambda_function.my-lambda"]},"principal":{"references":["data.aws_caller_identity.current"]},"qualifier":{"references":["aws_lambda_alias.my-lambda-alias"]},"source_arn":{"references":["aws_iam_role.lambda-role"]},"statement_id":{"constant_value":"AllowUser1Execution"}},"schema_version":0,"raw_data":{"FileName":"main.tf","StartLine":31,"EndLine":38}},{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_config_key":"aws","schema_version":0,"raw_data":{"FileName":"main.tf","StartLine":1,"EndLine":1}}]}}}
