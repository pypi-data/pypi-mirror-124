(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7356a3d1"],{"1dde":function(t,e,a){var r=a("d039"),n=a("b622"),i=a("2d00"),o=n("species");t.exports=function(t){return i>=51||!r((function(){var e=[],a=e.constructor={};return a[o]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"20bb":function(t,e,a){"use strict";a("d906")},3778:function(t,e,a){"use strict";a("ac1f"),a("1276"),a("159b");var r=a("f756");e["a"]={queryDatasetGraph:function(t){return Object(r["b"])({method:"get",url:"v1/mindinsight/datasets/dataset_graph",params:t})},queryLineagesData:function(t){return Object(r["b"])({method:"post",url:"v1/mindinsight/lineagemgr/lineages",data:t.body})},putLineagesData:function(t){return Object(r["b"])({method:"put",url:"v1/mindinsight/lineagemgr/lineages?train_id="+encodeURIComponent(t.train_id),data:t.body})},queryTargetsData:function(t){return Object(r["b"])({method:"post",url:"v1/mindinsight/optimizer/targets/search",data:t.body})},querySummaryList:function(t,e){return Object(r["b"])({method:"get",url:"v1/mindinsight/datavisual/train-jobs",params:t,headers:{ignoreError:e}})},getScalarsSample:function(t){return Object(r["b"])({method:"get",url:"v1/mindinsight/datavisual/scalar/metadata",params:t,headers:{ignoreError:!0}})},getTensorsSample:function(t){return Object(r["b"])({method:"get",url:"v1/mindinsight/datavisual/tensors",params:t,headers:{ignoreError:!0}})},queryGraphData:function(t){return Object(r["b"])({method:"get",url:"v1/mindinsight/datavisual/graphs/nodes",params:t})},searchNodesNames:function(t){return Object(r["b"])({method:"get",url:"v1/mindinsight/datavisual/graphs/nodes/names",params:t})},querySingleNode:function(t){return Object(r["b"])({method:"get",url:"v1/mindinsight/datavisual/graphs/single-node",params:t})},getSingleTrainJob:function(t,e){return Object(r["b"])({method:"get",url:"v1/mindinsight/datavisual/single-job",params:t,headers:{ignoreError:e}})},trainJobsCaches:function(t){return Object(r["b"])({method:"post",url:"v1/mindinsight/datavisual/train-job-caches",data:t})},getSummarySample:function(t){var e=t.train_id,a=e.split("&"),n="";return a.forEach((function(t){t&&(n+="train_id=".concat(t,"&"))})),n+="tag=".concat(encodeURIComponent(t.tag)),Object(r["b"])({method:"get",url:"v1/mindinsight/datavisual/scalars?".concat(n)})},getImageMetadatas:function(t){return Object(r["b"])({method:"get",url:"v1/mindinsight/datavisual/image/metadata",params:t,headers:{ignoreError:!0}})},getImageData:function(t){return Object(r["b"])({method:"get",url:"v1/mindinsight/datavisual/image/single-image",params:t,headers:{ignoreError:!0}})},getDatavisualPlugins:function(t){return Object(r["b"])({method:"get",url:"v1/mindinsight/datavisual/plugins",params:t})},getHistogramData:function(t){return Object(r["b"])({method:"get",url:"v1/mindinsight/datavisual/histograms",params:t})},getProfilerDeviceData:function(t){return Object(r["b"])({method:"get",url:"v1/mindinsight/profile/devices",params:t})},getProfilerOpData:function(t){return Object(r["b"])({method:"post",url:"v1/mindinsight/profile/ops/search",params:t.params,data:t.body,headers:{ignoreError:!0}})},queryDataOfProfileHelper:function(t){return Object(r["b"])({method:"get",url:"v1/mindinsight/profile/summary/propose",params:t})},queryTrainingTrace:function(t){return Object(r["b"])({method:"get",url:"v1/mindinsight/profile/training-trace/graph",params:t,headers:{ignoreError:!0}})},targetTimeInfo:function(t){return Object(r["b"])({method:"get",url:"v1/mindinsight/profile/training-trace/target-time-info",params:t,headers:{ignoreError:!0}})},queryTimeline:function(t){return Object(r["b"])({method:"get",url:"v1/mindinsight/profile/timeline",params:t,headers:{ignoreError:!0}})},queryTimelineInfo:function(t){return Object(r["b"])({method:"get",url:"v1/mindinsight/profile/timeline-summary",params:t,headers:{ignoreError:!0}})},queryOpQueue:function(t){return Object(r["b"])({method:"post",url:"v1/mindinsight/profile/minddata-pipeline/op-queue",params:t.params,data:t.body,headers:{ignoreError:!0}})},queryQueue:function(t){return Object(r["b"])({method:"get",url:"v1/mindinsight/profile/minddata-pipeline/queue",params:t,headers:{ignoreError:!0}})},queryProcessSummary:function(t){return Object(r["b"])({method:"get",url:"v1/mindinsight/profile/process_summary",params:t,headers:{ignoreError:!0}})},queueInfo:function(t){return Object(r["b"])({method:"get",url:"v1/mindinsight/profile/queue_info",params:t,headers:{ignoreError:!0}})},minddataOp:function(t){return Object(r["b"])({method:"get",url:"v1/mindinsight/profile/minddata_op",params:t,headers:{ignoreError:!0}})},getSession:function(t){return Object(r["b"])({method:"post",url:"v1/mindinsight/debugger/sessions",data:t})},deleteSession:function(t){return Object(r["b"])({method:"post",url:"v1/mindinsight/debugger/sessions/".concat(t,"/delete")})},checkSessions:function(){return Object(r["b"])({method:"get",url:"v1/mindinsight/debugger/sessions"})},pollData:function(t,e){return Object(r["b"])({method:"get",url:"v1/mindinsight/debugger/sessions/".concat(e,"/poll-data"),params:t,headers:{ignoreError:!0},timeout:0})},retrieve:function(t,e){return Object(r["b"])({method:"post",url:"v1/mindinsight/debugger/sessions/".concat(e,"/retrieve"),data:t})},createWatchpoint:function(t,e){return Object(r["b"])({method:"post",url:"v1/mindinsight/debugger/sessions/".concat(e,"/create-watchpoint"),data:t})},updateWatchpoint:function(t,e){return Object(r["b"])({method:"post",url:"v1/mindinsight/debugger/sessions/".concat(e,"/update-watchpoint"),data:t})},deleteWatchpoint:function(t,e){return Object(r["b"])({method:"post",url:"v1/mindinsight/debugger/sessions/".concat(e,"/delete-watchpoint"),data:t})},control:function(t,e){return Object(r["b"])({method:"post",url:"v1/mindinsight/debugger/sessions/".concat(e,"/control"),data:t})},search:function(t,e){return Object(r["b"])({method:"get",url:"v1/mindinsight/debugger/sessions/".concat(e,"/search"),params:t})},retrieveNodeByBfs:function(t){return Object(r["b"])({method:"get",url:"v1/mindinsight/debugger/retrieve_node_by_bfs",params:t})},tensorComparisons:function(t,e){return Object(r["b"])({method:"get",url:"v1/mindinsight/debugger/sessions/".concat(e,"/tensor-comparisons"),params:t})},tensors:function(t,e){return Object(r["b"])({method:"get",url:"v1/mindinsight/debugger/sessions/".concat(e,"/tensors"),params:t})},retrieveTensorHistory:function(t,e){return Object(r["b"])({method:"post",url:"v1/mindinsight/debugger/sessions/".concat(e,"/tensor-history"),data:t})},queryConditions:function(t){return Object(r["b"])({method:"get",url:"v1/mindinsight/debugger/sessions/".concat(t,"/condition-collections")})},recheckWatchPoints:function(t){return Object(r["b"])({method:"post",url:"v1/mindinsight/debugger/sessions/".concat(t,"/recheck")})},searchWatchpointHits:function(t,e){return Object(r["b"])({method:"post",url:"v1/mindinsight/debugger/sessions/".concat(e,"/search-watchpoint-hits"),data:t})},queryStackList:function(t,e){return Object(r["b"])({method:"get",url:"v1/mindinsight/debugger/sessions/".concat(e,"/stacks"),params:t})},loadTensor:function(t,e){return Object(r["b"])({method:"post",url:"v1/mindinsight/debugger/sessions/".concat(e,"/tensor-files/load"),data:t})},getExplainList:function(t){return Object(r["b"])({method:"get",url:"v1/mindinsight/explainer/explain-jobs",params:t})},queryTrainInfo:function(t){return Object(r["b"])({method:"get",url:"v1/mindinsight/explainer/explain-job",params:t})},queryPageInfo:function(t){return Object(r["b"])({method:"post",url:"v1/mindinsight/explainer/saliency",data:t})},getEvaluation:function(t){return Object(r["b"])({method:"get",url:"v1/mindinsight/explainer/evaluation",params:t})},queryHOCData:function(t){return Object(r["b"])({method:"post",url:"v1/mindinsight/explainer/hoc",data:t})},tensorHitsData:function(t,e){return Object(r["b"])({method:"get",url:"v1/mindinsight/debugger/sessions/".concat(e,"/tensor-hits"),params:t})},getTensorGraphData:function(t,e){return Object(r["b"])({method:"get",url:"v1/mindinsight/debugger/sessions/".concat(e,"/tensor-graphs"),params:t})},getCpuUtilization:function(t){return Object(r["b"])({method:"post",url:"v1/mindinsight/profile/minddata-cpu-utilization-summary",params:t.params,data:t.body})},setRecommendWatchPoints:function(t,e){return Object(r["b"])({method:"post",url:"v1/mindinsight/debugger/sessions/".concat(e,"/set-recommended-watch-points"),data:t})},queryMemorySummary:function(t){return Object(r["b"])({method:"get",url:"v1/mindinsight/profile/memory-summary",params:t})},queryMemoryGraphics:function(t){return Object(r["b"])({method:"get",url:"v1/mindinsight/profile/memory-graphics",params:t})},queryMemoryBreakdowns:function(t){return Object(r["b"])({method:"get",url:"v1/mindinsight/profile/memory-breakdowns",params:t})},getClusterInfo:function(t){return Object(r["b"])({method:"post",params:t.params,data:t.body,url:"v1/mindinsight/profile/cluster-step-trace-summary"})},getCommInfo:function(t){return Object(r["b"])({method:"post",params:t.params,data:t.body,url:"v1/mindinsight/profile/search-cluster-communication"})},getLinkInfo:function(t){return Object(r["b"])({method:"post",params:t.params,data:t.body,url:"v1/mindinsight/profile/search-cluster-link"})},getClusterPeakMemory:function(t){return Object(r["b"])({method:"get",params:t,url:"v1/mindinsight/profile/cluster-peak-memory"})},getFlopsSummary:function(t){return Object(r["b"])({method:"get",params:t,url:"v1/mindinsight/profile/flops-summary"})},getClusterFlops:function(t){return Object(r["b"])({method:"get",params:t,url:"v1/mindinsight/profile/cluster-flops"})},getFlopsScope:function(t){return Object(r["b"])({method:"get",params:t,url:"v1/mindinsight/profile/flops-scope"})}}},"4e82":function(t,e,a){"use strict";var r=a("23e7"),n=a("1c0b"),i=a("7b0b"),o=a("d039"),s=a("a640"),c=[],u=c.sort,m=o((function(){c.sort(void 0)})),d=o((function(){c.sort(null)})),l=s("sort"),p=m||!d||!l;r({target:"Array",proto:!0,forced:p},{sort:function(t){return void 0===t?u.call(i(this)):u.call(i(this),n(t))}})},"53ca":function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));a("e01a"),a("d3b7"),a("d28b"),a("e260"),a("3ca3"),a("ddb0");function r(t){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}},"78df":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"cl-memory-heatmap-dasnhoard"},[r("div",{staticClass:"dashboard-item"},[r("div",{staticClass:"legend-content"},t._l(t.legendArr,(function(e,a){return r("div",{key:a,staticClass:"legend-item"},[r("div",{staticClass:"color-item"},[r("div",{style:{backgroundColor:e.backgroundColor}})]),r("div",{staticClass:"value-item"},[t._v(t._s(e.info))])])})),0),r("div",{staticClass:"cluster-wrap"},[r("div",{staticClass:"title-item"},[r("div",{staticClass:"title-text"},[t._v(" "+t._s(t.$t("profilingCluster.memoryHeatMapTitle"))+" ")]),r("div",{staticClass:"detail-link",class:{disabled:t.isHeterogeneous||!t.memoryHeatmapInitOver||!t.memoryHeatmapDataList.length}},[r("button",{attrs:{disabled:t.isHeterogeneous||!t.memoryHeatmapInitOver||!t.memoryHeatmapDataList.length},on:{click:function(e){return t.viewDetail("memory-heatmap")}}},[t._v(" "+t._s(t.$t("profiling.viewDetail"))+" "),r("i",{staticClass:"el-icon-d-arrow-right"})])])]),r("div",{staticClass:"content-item"},[r("div",{directives:[{name:"show",rawName:"v-show",value:!t.memoryHeatmapInitOver||!t.memoryHeatmapDataList.length,expression:"!memoryHeatmapInitOver || !memoryHeatmapDataList.length"}],staticClass:"noData-content"},[r("div",[r("img",{attrs:{src:a("9485")}})]),t.isHeterogeneous?r("div",{staticClass:"noData-text"},[t._v(t._s(t.$t("profiling.isHeterogeneous")))]):t.memoryHeatmapInitOver&&!t.memoryHeatmapDataList.length?r("div",{staticClass:"noData-text"},[t._v(t._s(t.$t("public.noData")))]):r("div",{staticClass:"noData-text"},[t._v(t._s(t.$t("public.dataLoading")))])]),r("div",{directives:[{name:"show",rawName:"v-show",value:t.memoryHeatmapDataList.length&&t.memoryHeatmapInitOver,expression:"memoryHeatmapDataList.length && memoryHeatmapInitOver"}],staticClass:"dashboard-chart-content"},[r("div",{staticClass:"heatmap-content"},t._l(t.memoryHeatmapDataList,(function(e){return r("div",{key:e.rankID,staticClass:"heatmap-item"},[r("el-tooltip",{attrs:{placement:"top"}},[r("div",{attrs:{slot:"content"},slot:"content"},[r("div",[t._v(" "+t._s(t.$t("profilingCluster.peakMem")+t.$t("symbols.colon")+e.peakMem.toFixed(3)+t.$t("unit.GiB"))+" "),r("br"),t._v(" "+t._s(t.$t("profilingCluster.capaCity")+t.$t("symbols.colon")+e.capacity+t.$t("unit.GiB"))+" ")])]),r("div",{staticClass:"color-item",style:{backgroundColor:e.backgroundColor}})]),t._v(" "+t._s(t.$t("profilingCluster.rankID")+e.rankID)+" ")],1)})),0)])])]),r("div",{staticClass:"cluster-wrap"},[r("div",{staticClass:"title-item"},[r("div",{staticClass:"title-text"},[t._v(" "+t._s(t.$t("profilingCluster.flopsHeatMapTitle"))+" ")]),r("div",{staticClass:"detail-link",class:{disabled:!t.flopsHeatmapInitOver||!t.flopsHeatmapDataList.length}},[r("button",{attrs:{disabled:!t.flopsHeatmapInitOver||!t.flopsHeatmapDataList.length},on:{click:function(e){return t.viewDetail("flops-heatmap")}}},[t._v(" "+t._s(t.$t("profiling.viewDetail"))+" "),r("i",{staticClass:"el-icon-d-arrow-right"})])])]),r("div",{staticClass:"content-item"},[r("div",{directives:[{name:"show",rawName:"v-show",value:!t.flopsHeatmapInitOver||!t.flopsHeatmapDataList.length,expression:"!flopsHeatmapInitOver || !flopsHeatmapDataList.length"}],staticClass:"noData-content"},[r("div",[r("img",{attrs:{src:a("9485")}})]),t.flopsHeatmapInitOver&&!t.flopsHeatmapDataList.length?r("div",{staticClass:"noData-text"},[t._v(t._s(t.$t("public.noData")))]):r("div",{staticClass:"noData-text"},[t._v(t._s(t.$t("public.dataLoading")))])]),r("div",{directives:[{name:"show",rawName:"v-show",value:t.flopsHeatmapDataList.length&&t.flopsHeatmapInitOver,expression:"flopsHeatmapDataList.length && flopsHeatmapInitOver"}],staticClass:"dashboard-chart-content"},[r("div",{staticClass:"heatmap-content"},t._l(t.flopsHeatmapDataList,(function(e){return r("div",{key:e.rankID,staticClass:"heatmap-item"},[r("el-tooltip",{attrs:{placement:"top"}},[r("div",{attrs:{slot:"content"},slot:"content"},[r("div",[t._v(" FLOPs"+t._s(t.$t("symbols.colon")+e.flops)+"M ")])]),r("div",{staticClass:"color-item",style:{backgroundColor:e.backgroundColor}})]),t._v(" "+t._s(t.$t("profilingCluster.rankID")+e.rankID)+" ")],1)})),0)])])])])])},n=[],i=a("53ca"),o=(a("159b"),a("4e82"),a("fb6a"),a("3778")),s=a("2dd7"),c={data:function(){return{trainInfo:{id:this.$route.query.id,dir:this.$route.query.dir,path:this.$route.query.path},memoryHeatmapInitOver:!1,memoryHeatmapDataList:[],flopsHeatmapInitOver:!1,flopsHeatmapDataList:[],legendArr:[],num:8,legendArrLength:10,granularity:.1,isHeterogeneous:!1}},mounted:function(){this.initLegendArr(),this.getMemoryHeatMapData(),this.getFlopsHeatMapData()},methods:{viewDetail:function(t){this.$emit("viewDetail",t)},initLegendArr:function(){for(var t=[],e=s["a"].clusterHeatmapDashboardColorArr,a=0;a<e.length;a++)t.push({backgroundColor:e[a],info:"≥0.".concat(a)});this.legendArr=t},getFlopsHeatMapData:function(){var t=this,e={train_id:this.trainInfo.id};o["a"].getClusterFlops(e).then((function(e){if(e&&e.data){var a=[];e.data.forEach((function(e){var r=Math.floor(e.FLOPs_norm/t.granularity);a.push({rankID:e.rank_id,flops:e.FLOPs,backgroundColor:t.legendArr[1===e.FLOPs_norm?r-1:r].backgroundColor})})),t.flopsHeatmapDataList=a.sort((function(t,e){return t.rankID-e.rankID})),t.flopsHeatmapDataList=t.flopsHeatmapDataList.length>t.num?t.flopsHeatmapDataList.slice(0,t.num):t.flopsHeatmapDataList,t.flopsHeatmapInitOver=!0}else t.flopsHeatmapInitOver=!0})).catch((function(){t.flopsHeatmapInitOver=!0}))},getMemoryHeatMapData:function(){var t=this,e={train_id:this.trainInfo.id};o["a"].getClusterPeakMemory(e).then((function(e){if("object"===Object(i["a"])(e.data)&&e.data.is_heterogeneous)return t.isHeterogeneous=!0,void(t.memoryHeatmapInitOver=!0);if(e&&e.data){var a=[];e.data.forEach((function(e){var r=Math.floor(e.peak_mem/e.capacity/t.granularity),n=e.capacity,i=e.peak_mem;a.push({rankID:e.rank_id,peakMem:i,capacity:n,backgroundColor:t.legendArr[r]?t.legendArr[r].backgroundColor:t.legendArr.slice(-1).backgroundColor})})),t.memoryHeatmapDataList=a.sort((function(t,e){return t.rankID-e.rankID})),t.memoryHeatmapDataList=t.memoryHeatmapDataList.length>t.num?t.memoryHeatmapDataList.slice(0,t.num):t.memoryHeatmapDataList,t.memoryHeatmapInitOver=!0}else t.memoryHeatmapInitOver=!0})).catch((function(){t.memoryHeatmapInitOver=!0}))}}},u=c,m=(a("20bb"),a("2877")),d=Object(m["a"])(u,r,n,!1,null,"0a7b47f0",null);e["default"]=d.exports},8418:function(t,e,a){"use strict";var r=a("c04e"),n=a("9bf2"),i=a("5c6c");t.exports=function(t,e,a){var o=r(e);o in t?n.f(t,o,i(0,a)):t[o]=a}},9485:function(t,e,a){t.exports=a.p+"static/img/nodata.8290bed9.png"},d28b:function(t,e,a){var r=a("746f");r("iterator")},d906:function(t,e,a){},e01a:function(t,e,a){"use strict";var r=a("23e7"),n=a("83ab"),i=a("da84"),o=a("5135"),s=a("861d"),c=a("9bf2").f,u=a("e893"),m=i.Symbol;if(n&&"function"==typeof m&&(!("description"in m.prototype)||void 0!==m().description)){var d={},l=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof l?new m(t):void 0===t?m():m(t);return""===t&&(d[e]=!0),e};u(l,m);var p=l.prototype=m.prototype;p.constructor=l;var g=p.toString,h="Symbol(test)"==String(m("test")),b=/^Symbol\((.*)\)[^)]+$/;c(p,"description",{configurable:!0,get:function(){var t=s(this)?this.valueOf():this,e=g.call(t);if(o(d,t))return"";var a=h?e.slice(7,-1):e.replace(b,"$1");return""===a?void 0:a}}),r({global:!0,forced:!0},{Symbol:l})}},fb6a:function(t,e,a){"use strict";var r=a("23e7"),n=a("861d"),i=a("e8b5"),o=a("23cb"),s=a("50c4"),c=a("fc6a"),u=a("8418"),m=a("b622"),d=a("1dde"),l=a("ae40"),p=d("slice"),g=l("slice",{ACCESSORS:!0,0:0,1:2}),h=m("species"),b=[].slice,f=Math.max;r({target:"Array",proto:!0,forced:!p||!g},{slice:function(t,e){var a,r,m,d=c(this),l=s(d.length),p=o(t,l),g=o(void 0===e?l:e,l);if(i(d)&&(a=d.constructor,"function"!=typeof a||a!==Array&&!i(a.prototype)?n(a)&&(a=a[h],null===a&&(a=void 0)):a=void 0,a===Array||void 0===a))return b.call(d,p,g);for(r=new(void 0===a?Array:a)(f(g-p,0)),m=0;p<g;p++,m++)p in d&&u(r,m,d[p]);return r.length=m,r}})}}]);