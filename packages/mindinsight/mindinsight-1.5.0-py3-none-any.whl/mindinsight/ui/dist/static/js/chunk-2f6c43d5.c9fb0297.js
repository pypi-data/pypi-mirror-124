(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2f6c43d5"],{"06c5":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));n("fb6a"),n("d3b7"),n("b0c0"),n("a630"),n("3ca3");var r=n("6b75");function i(t,e){if(t){if("string"===typeof t)return Object(r["a"])(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r["a"])(t,e):void 0}}},1148:function(t,e,n){"use strict";var r=n("a691"),i=n("1d80");t.exports="".repeat||function(t){var e=String(i(this)),n="",a=r(t);if(a<0||a==1/0)throw RangeError("Wrong number of repetitions");for(;a>0;(a>>>=1)&&(e+=e))1&a&&(n+=e);return n}},"29d2":function(t,e,n){},3835:function(t,e,n){"use strict";function r(t){if(Array.isArray(t))return t}n.d(e,"a",(function(){return c}));n("e01a"),n("d3b7"),n("d28b"),n("e260"),n("3ca3"),n("ddb0");function i(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,a=[],o=!0,c=!1;try{for(n=n.call(t);!(o=(r=n.next()).done);o=!0)if(a.push(r.value),e&&a.length===e)break}catch(s){c=!0,i=s}finally{try{o||null==n["return"]||n["return"]()}finally{if(c)throw i}}return a}}var a=n("06c5");function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t,e){return r(t)||i(t,e)||Object(a["a"])(t,e)||o()}},"408a":function(t,e,n){var r=n("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=r(t))throw TypeError("Incorrect invocation");return+t}},"4c86":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"performance-dashboard"},[n("div",{staticClass:"container"},[n("div",{staticClass:"header",on:{click:function(e){return t.jump("step-trace",t.performanceState===t.normalState)}}},[n("span",{staticClass:"title"},[t._v(t._s(t.performanceChart.title))]),n("span",{class:{jump:!0,"is-effective":t.performanceState===t.normalState}},[t._v(" "+t._s(t.$t("profiling.viewDetail"))+" "),n("i",{staticClass:"el-icon-d-arrow-right"})])]),n("div",{ref:"performance",staticClass:"content"},[n("empty",{attrs:{state:t.performanceState}})],1)]),n("div",{staticClass:"container"},[n("div",{staticClass:"header",on:{click:function(e){return t.jump("communication",t.commState===t.normalState)}}},[n("span",{staticClass:"title"},[t._v(t._s(t.commChart.title))]),n("span",{class:{jump:!0,"is-effective":t.commState===t.normalState}},[t._v(" "+t._s(t.$t("profiling.viewDetail"))+" "),n("i",{staticClass:"el-icon-d-arrow-right"})])]),n("div",{ref:"comm",staticClass:"content"},[n("empty",{attrs:{state:t.commState}})],1)])])},i=[],a=n("53ca"),o=(n("d3b7"),n("159b"),n("99af"),n("cb29"),n("9fac")),c=n("3778"),s=n("d138"),l=n("9944"),u=4,f={components:{empty:s["d"]},data:function(){return{trainInfo:{id:this.$route.query.id,path:this.$route.query.path,dir:this.$route.query.dir},resizeTimer:null,performanceState:s["b"],performanceChart:{dom:null,instance:null,data:null,dimensions:[this.$t("profilingCluster.rankID"),this.$t("profiling.iterationGapTime"),this.$t("profiling.fpBpTime"),this.$t("profiling.tailTime")],title:this.$t("profilingCluster.stepChartTitle")},commState:s["b"],commChart:{dom:null,instance:null,data:null,dimensions:[this.$t("profilingCluster.rankID"),this.$t("profilingCluster.commCost"),this.$t("profilingCluster.waitCost")],title:this.$t("profilingCluster.commChartTitle")},normalState:"normal",themeIndex:this.$store.state.themeIndex}},mounted:function(){var t=this;this.performanceChart.dom=this.$refs.performance?this.$refs.performance:null,this.commChart.dom=this.$refs.comm?this.$refs.comm:null,this.queryPerformanceInfo().then((function(e){e&&t.initChart(t.performanceChart)})),this.queryCommInfo().then((function(e){e&&t.initChart(t.commChart)})),window.addEventListener("resize",this.resizeCallBack)},methods:{resizeCallBack:function(){var t=this;this.resizeTimer&&clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout((function(){t.performanceChart.dom&&t.performanceChart.instance&&t.performanceChart.instance.resize(),t.commChart.dom&&t.commChart.instance&&t.commChart.instance.resize()}),100)},jump:function(t,e){e&&this.$emit("viewDetail",t)},queryPerformanceInfo:function(){var t=this;return new Promise((function(e){var n={};n.params={train_id:t.trainInfo.id},c["a"].getClusterInfo(n).then((function(n){var r,i;if("object"===Object(a["a"])(n.data)&&n.data.is_heterogeneous)t.performanceState=s["a"];else if((null===n||void 0===n||null===(r=n.data)||void 0===r||null===(i=r.info)||void 0===i?void 0:i.length)>0){var o=[],c=n.data["parallel-mode"],l={"data-parallel":{model:"step_trace_info",dimensions:[t.$t("profilingCluster.rankID"),t.$t("profiling.iterationGapTime"),t.$t("profiling.fpBpTime"),t.$t("profiling.tailTime")]},"model-parallel":{model:"step_bottleneck_info",dimensions:[t.$t("profilingCluster.rankID"),t.$t("profiling.iterationGapTime"),t.$t("profilingCluster.computationTime"),t.$t("profilingCluster.communicationAloneTime")]},"pipeline-parallel":{model:"step_bottleneck_info",dimensions:[t.$t("profilingCluster.rankID"),t.$t("profiling.iterationGapTime"),t.$t("profilingCluster.computationTime"),t.$t("profilingCluster.stageTime"),t.$t("profilingCluster.communicationAloneTime"),t.$t("profilingCluster.collectiveCommunicationAlone"),t.$t("profilingCluster.receiveAloneTime")]}},u=[];n.data.info.forEach((function(t){var e=[t.rank_id].concat(t[l[c].model]);u.push(e)})),"pipeline-parallel"===c?u.forEach((function(t){o.push([t[0],t[1],t[5],t[3],t[4],t[6],t[2]])})):"model-parallel"===c?u.forEach((function(t){o.push([t[0],t[1],t[3],t[2]])})):o=u,t.performanceChart.data=o,t.performanceChart.dimensions=l[c].dimensions,t.performanceState=t.normalState,e(!0)}else t.performanceState=s["c"]})).catch((function(n){t.performanceState=s["c"],e(!1)}))}))},queryCommInfo:function(){var t=this;return new Promise((function(e){var n={};n.params={train_id:t.trainInfo.id},c["a"].getCommInfo(n).then((function(n){var r;if((null===n||void 0===n||null===(r=n.data)||void 0===r?void 0:r.communication.length)>0){var i=[];n.data.communication.forEach((function(t){i.push([t.rank_id,Object(l["c"])(t.communication_info[0],u),Object(l["c"])(t.communication_info[1],u)])})),t.commChart.data=i,t.commState=t.normalState,e(!0)}else t.commState=s["c"]})).catch((function(n){t.commState=s["c"],e(!1)}))}))},initChart:function(t){t.dom&&(t.instance||(t.instance=o["a"].init(t.dom,o["b"])),t.instance.setOption({tooltip:{trigger:"axis",axisPointer:{type:"shadow"},confine:!0},legend:{right:70,top:15,data:""},grid:{top:60,left:80,right:80},dataset:{source:[t.dimensions].concat(t.data)},xAxis:{name:this.$t("profilingCluster.rankID"),nameTextStyle:{align:"left",padding:[0,5]},type:"category",axisLine:{lineStyle:{width:2}}},yAxis:{name:this.$t("profilingCluster.timeTitle"),nameGap:20,nameTextStyle:{align:"right",padding:[0,5]},axisLine:{lineStyle:{width:2}},splitLine:{lineStyle:{type:"dashed"}}},series:new Array(t.dimensions.length-1).fill({type:"bar",barWidth:8})}))}},beforeDestroy:function(){this.resizeTimer&&clearTimeout(this.resizeTimer),window.removeEventListener("resize",this.resizeCallBack)}},m=f,d=(n("e5bb"),n("2877")),p=Object(d["a"])(m,r,i,!1,null,"182ea0be",null);e["default"]=p.exports},"4df4":function(t,e,n){"use strict";var r=n("0366"),i=n("7b0b"),a=n("9bdd"),o=n("e95a"),c=n("50c4"),s=n("8418"),l=n("35a1");t.exports=function(t){var e,n,u,f,m,d,p=i(t),h="function"==typeof this?this:Array,b=arguments.length,v=b>1?arguments[1]:void 0,g=void 0!==v,y=l(p),C=0;if(g&&(v=r(v,b>2?arguments[2]:void 0,2)),void 0==y||h==Array&&o(y))for(e=c(p.length),n=new h(e);e>C;C++)d=g?v(p[C],C):p[C],s(n,C,d);else for(f=y.call(p),m=f.next,n=new h;!(u=m.call(f)).done;C++)d=g?a(f,v,[u.value,C],!0):u.value,s(n,C,d);return n.length=C,n}},"53ca":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));n("e01a"),n("d3b7"),n("d28b"),n("e260"),n("3ca3"),n("ddb0");function r(t){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}},"5e89":function(t,e,n){var r=n("861d"),i=Math.floor;t.exports=function(t){return!r(t)&&isFinite(t)&&i(t)===t}},"6b75":function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}n.d(e,"a",(function(){return r}))},"81d5":function(t,e,n){"use strict";var r=n("7b0b"),i=n("23cb"),a=n("50c4");t.exports=function(t){var e=r(this),n=a(e.length),o=arguments.length,c=i(o>1?arguments[1]:void 0,n),s=o>2?arguments[2]:void 0,l=void 0===s?n:i(s,n);while(l>c)e[c++]=t;return e}},"8ba4":function(t,e,n){var r=n("23e7"),i=n("5e89");r({target:"Number",stat:!0},{isInteger:i})},9485:function(t,e,n){t.exports=n.p+"static/img/nodata.8290bed9.png"},"987e":function(t,e,n){"use strict";n("29d2")},9944:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"b",(function(){return c}));var r=n("3835");n("caad"),n("2532"),n("ac1f"),n("466d"),n("99af"),n("d3b7"),n("25f0"),n("b680"),n("8ba4"),n("a9e3");function i(t,e,n){t.toLowerCase().includes("rgb")||(t=a(t)),e.toLowerCase().includes("rgb")||(e=a(e));for(var i=t.match(/[0-9]\d*/g),o=Object(r["a"])(i,3),c=o[0],s=o[1],l=o[2],u=e.match(/[0-9]\d*/g),f=Object(r["a"])(u,3),m=f[0],d=f[1],p=f[2],h=(+m-+c)/n,b=(+d-+s)/n,v=(+p-+l)/n,g=[t],y=1;y<n;y++){var C=parseInt(h*y+ +c),S=parseInt(b*y+ +s),$=parseInt(v*y+ +l);g.push("rgb(".concat(C,",").concat(S,",").concat($,")"))}return g}function a(t){var e=16;return 4===t.length?"rgb(".concat(parseInt(t[1]+t[1],e),", ").concat(parseInt(t[2]+t[2],e),", ").concat(parseInt(t[3]+t[3],e),")"):"rgb(".concat(parseInt(t[1]+t[2],e),", ").concat(parseInt(t[3]+t[4],e),", ").concat(parseInt(t[5]+t[6],e),")")}function o(t,e){if("number"!==typeof t&&(t=parseFloat(t)),isNaN(t))return"NaN";var n=t+"",r=n.indexOf(".");return r<0||n.length-r-1<=e?n:t.toFixed(e)}function c(t){if(Number.isInteger(t))return!0;if("string"!==typeof t)return!1;var e=+t;return e+""===t&&Number.isInteger(e)}},a630:function(t,e,n){var r=n("23e7"),i=n("4df4"),a=n("1c7e"),o=!a((function(t){Array.from(t)}));r({target:"Array",stat:!0,forced:o},{from:i})},b0c0:function(t,e,n){var r=n("83ab"),i=n("9bf2").f,a=Function.prototype,o=a.toString,c=/^\s*function ([^ (]*)/,s="name";r&&!(s in a)&&i(a,s,{configurable:!0,get:function(){try{return o.call(this).match(c)[1]}catch(t){return""}}})},b680:function(t,e,n){"use strict";var r=n("23e7"),i=n("a691"),a=n("408a"),o=n("1148"),c=n("d039"),s=1..toFixed,l=Math.floor,u=function(t,e,n){return 0===e?n:e%2===1?u(t,e-1,n*t):u(t*t,e/2,n)},f=function(t){var e=0,n=t;while(n>=4096)e+=12,n/=4096;while(n>=2)e+=1,n/=2;return e},m=s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!c((function(){s.call({})}));r({target:"Number",proto:!0,forced:m},{toFixed:function(t){var e,n,r,c,s=a(this),m=i(t),d=[0,0,0,0,0,0],p="",h="0",b=function(t,e){var n=-1,r=e;while(++n<6)r+=t*d[n],d[n]=r%1e7,r=l(r/1e7)},v=function(t){var e=6,n=0;while(--e>=0)n+=d[e],d[e]=l(n/t),n=n%t*1e7},g=function(){var t=6,e="";while(--t>=0)if(""!==e||0===t||0!==d[t]){var n=String(d[t]);e=""===e?n:e+o.call("0",7-n.length)+n}return e};if(m<0||m>20)throw RangeError("Incorrect fraction digits");if(s!=s)return"NaN";if(s<=-1e21||s>=1e21)return String(s);if(s<0&&(p="-",s=-s),s>1e-21)if(e=f(s*u(2,69,1))-69,n=e<0?s*u(2,-e,1):s/u(2,e,1),n*=4503599627370496,e=52-e,e>0){b(0,n),r=m;while(r>=7)b(1e7,0),r-=7;b(u(10,r,1),0),r=e-1;while(r>=23)v(1<<23),r-=23;v(1<<r),b(1,1),v(2),h=g()}else b(0,n),b(1<<-e,0),h=g()+o.call("0",m);return m>0?(c=h.length,h=p+(c<=m?"0."+o.call("0",m-c)+h:h.slice(0,c-m)+"."+h.slice(c-m))):h=p+h,h}})},b7ec:function(t,e,n){},cb29:function(t,e,n){var r=n("23e7"),i=n("81d5"),a=n("44d2");r({target:"Array",proto:!0},{fill:i}),a("fill")},d138:function(t,e,n){"use strict";n.d(e,"c",(function(){return a})),n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return c}));var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"empty-container"},[r("img",{attrs:{src:n("9485")}}),r("span",[t._v(t._s(t.text))])])},i=[],a="noData",o="dataLoading",c="heterogeneous",s={props:{state:{type:String,default:o}},data:function(){return{noData:this.$t("public.noData"),emptyData:this.$t("public.emptyData"),dataLoading:this.$t("public.dataLoading"),stayTuned:this.$t("public.stayTuned"),heterogeneous:this.$t("profiling.isHeterogeneous")}},computed:{text:function(){return this[this.state]?this[this.state]:""}}},l=s,u=(n("987e"),n("2877")),f=Object(u["a"])(l,r,i,!1,null,"dec0352e",null);e["d"]=f.exports},d28b:function(t,e,n){var r=n("746f");r("iterator")},e01a:function(t,e,n){"use strict";var r=n("23e7"),i=n("83ab"),a=n("da84"),o=n("5135"),c=n("861d"),s=n("9bf2").f,l=n("e893"),u=a.Symbol;if(i&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var f={},m=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof m?new u(t):void 0===t?u():u(t);return""===t&&(f[e]=!0),e};l(m,u);var d=m.prototype=u.prototype;d.constructor=m;var p=d.toString,h="Symbol(test)"==String(u("test")),b=/^Symbol\((.*)\)[^)]+$/;s(d,"description",{configurable:!0,get:function(){var t=c(this)?this.valueOf():this,e=p.call(t);if(o(f,t))return"";var n=h?e.slice(7,-1):e.replace(b,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:m})}},e5bb:function(t,e,n){"use strict";n("b7ec")},fb6a:function(t,e,n){"use strict";var r=n("23e7"),i=n("861d"),a=n("e8b5"),o=n("23cb"),c=n("50c4"),s=n("fc6a"),l=n("8418"),u=n("b622"),f=n("1dde"),m=n("ae40"),d=f("slice"),p=m("slice",{ACCESSORS:!0,0:0,1:2}),h=u("species"),b=[].slice,v=Math.max;r({target:"Array",proto:!0,forced:!d||!p},{slice:function(t,e){var n,r,u,f=s(this),m=c(f.length),d=o(t,m),p=o(void 0===e?m:e,m);if(a(f)&&(n=f.constructor,"function"!=typeof n||n!==Array&&!a(n.prototype)?i(n)&&(n=n[h],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return b.call(f,d,p);for(r=new(void 0===n?Array:n)(v(p-d,0)),u=0;d<p;d++,u++)d in f&&l(r,u,f[d]);return r.length=u,r}})}}]);